var Home={init:function()
{var mainExHibitionLength=$('.mainExHibition').length;if(mainExHibitionLength>=3){$('.mainExHibition').eq(2).css('margin-right','0px');}
var deviceAgent=navigator.userAgent.toLowerCase();var isIOS=deviceAgent.match(/(iPad|iPhone|iPod)/i);$(".camera_commands").css("visibility: visiable;");function setCookie(cname,cvalue,exhours)
{var d=new Date();d.setTime(d.getTime()+(exhours*60*60*1000));var expires="expires="+d.toGMTString();document.cookie=cname+"="+cvalue+"; "+expires;}
function getCookie(name){var value="; "+document.cookie;var parts=value.split("; "+name+"=");if(parts.length==2)
return parts.pop().split(";").shift();}
function isCookiePopupToDisplay(){var starbuysDisplay=getCookie("starbuysDisplay");if(starbuysDisplay==''||starbuysDisplay==undefined){setCookie("starbuysDisplay","true",168);return true;}
return false;}
function genericPopup(){var $generic_popup_overlay=$(".specialmessagepopupbox"),$generic_popup=$(".generic_popup");if(!!window.ActiveXObject||"ActiveXObject"in window){showSpecialMessagePopup();$(".generic_popup .generic_popup_close").click(function(){hideSpecialMessagePopup();});setTimeout(hideSpecialMessagePopup,30000);}else{$(".specialmessagepopupbox").jDialog({buttons:{cancel:{selector:".generic_popup .generic_popup_close",click:function(){$(".specialmessagepopupbox").dialog("close");}}}});$(".generic_popup_content img").show();setTimeout(function(){$(".specialmessagepopupbox").dialog("close");},30000);$(document).click(function(e){if($(e.target).is(".specialmessagepopupbox")){$(".specialmessagepopupbox").dialog("close");}});}
function showSpecialMessagePopup(){$(".specialmessagepopupbox").css("z-index","101").appendTo($("body"));$('<div class="ui-widget-overlay ui-front" style="z-index: 100;"></div>').appendTo($("body"));$(".specialmessagepopupbox").show();document.documentElement.style.overflow='hidden';}
function hideSpecialMessagePopup(){$(".specialmessagepopupbox").hide();$(".ui-widget-overlay").remove();document.documentElement.style.overflow='';}}
var page=$("main.home");var sliderBannner=$(".top-promotion-banner .swiper-wrapper .swiper-slide");if(sliderBannner!=null&&sliderBannner.length==1){$(".top-promotion-banner .swiper-button-prev").hide();$(".top-promotion-banner .swiper-button-next").hide();}
if($(page).length>0)
{var mySwiper;if(sliderBannner!=null&&sliderBannner.length>1){mySwiper=new Swiper(".top-promotion-banner",{autoplay:{delay:5000,disableOnInteraction:false},loop:true,pagination:{el:".top-promotion-banner .swiper-pagination",clickable:true},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}
var brand=$(page).children(".brand");var list=$(brand).children(".list");var next=$(brand).children(".icon-arrow-right");var prev=$(brand).children(".icon-arrow-left");Effect.buttonSlider.init(list,next,prev);if(Fn.isMobileDevice())
{$(brand).addClass("mobile-device");this.renderAppBanner();}
this.render();}
if(isCookiePopupToDisplay()&&$(".specialmessagepopupbox").length>0){genericPopup();}
this.renderProductCarousel();if(Fn.isTabletView()||Fn.isMobileView()){$(".product-promote-container .promo-product-banner .desktop").addClass("promo-banner-height");}
if(window.innerWidth<=1144){$(".productTabContainer.Panel-ProductDetail .tabpage").each(function(){var productCarouselTabComponentUid=$(this).attr("id");Home.getProductCarouselTabById(productCarouselTabComponentUid,Home.selectedProductCarouselTabById);});}else{Home.bindEventForProductCarouselTab();$(".productTabContainer.Panel-ProductDetail").each(function(){var firstProductCarouselTabComponentUid=$($(this).find(".tabpage").get(0)).attr("id");Home.getProductCarouselTabById(firstProductCarouselTabComponentUid,Home.selectedProductCarouselTabById);});}},render:function()
{var page=$("main.home");if($(page).length>0)
{var promotion=$(page).children(".top-promotion-banner");var container=$(promotion).children(".image-group");var ratio=1280/400;var mobile_ratio=320/275;var width=RUNTIME_DOCUMENT_WIDTH;var height=(RUNTIME_VIEW==MOBILE)?RUNTIME_DOCUMENT_WIDTH/mobile_ratio:RUNTIME_DOCUMENT_WIDTH/ratio;$(container).find("a").css({width:width,height:height});$(container).css({height:height});$(".product-promote").find(".graphic").each(function()
{$(this).find("img").height("auto");$(this).find("img").height($(this).height());});}},renderAppBanner:function()
{var bannerTitle=$('meta[name="smartBannerInfo"]').data('title');var bannerIcon=$('meta[name="smartBannerInfo"]').data('icon');var bannerButton=$('meta[name="smartBannerInfo"]').data('button');var bannerDaysHidden=$('meta[name="smartBannerInfo"]').data('dayshidden');$.smartbanner({title:bannerTitle,author:' ',icon:bannerIcon,button:bannerButton,price:'',inGooglePlay:'',daysHidden:bannerDaysHidden,appendToSelector:'header',layer:false,onInstall:function(){var marqueeLength=$("header .mobile-device .marquee").children().length;$('header .mobile-device.float-message').css('top','0px');$('header .main').css('top',marqueeLength==0?'0px':'24px');$('header .product-menu').css('top','0px');},onClose:function(){var marqueeLength=$("header .mobile-device .marquee").children().length;$('header .mobile-device.float-message').css('top','0px');$('header .main').css('top',marqueeLength==0?'0px':'24px');$('header .product-menu').css('top','0px');if(marqueeLength==0){$('main.home').css('padding-top',$('#smartbanner').outerHeight()+$('.mobile-device.float-message').outerHeight()+$('header .main').outerHeight()-102);}else{$('main.home').css('padding-top',$('#smartbanner').outerHeight()+$('.mobile-device.float-message').outerHeight()+$('header .main').outerHeight()-78);}}});if($('#smartbanner').length>0){this.setAppBannerHeight();}},setAppBannerHeight:function()
{var marqueeLength=$("header .mobile-device .marquee").children().length;$('header #smartbanner').css('top','0px');$('header .mobile-device.float-message').css('top',marqueeLength==0?'0px':'76px');$('header .main').css('top',marqueeLength==0?'79px':'104px');$('header .product-menu').css('top',marqueeLength==0?'56px':'80px');},renderProductCarousel:function(){if(!Fn.isMobileView()){return;}
var preImgHeight=0;var preImg;$(".product-promote-container").find(".product-promote").each(function(i){if(i%2==0){preImgHeight=$(this).find(".graphic img").height();preImg=$(this).find(".graphic img");}else{if($(this).find(".graphic img").height()>preImgHeight){$(preImg).css("height",$(this).find(".graphic img").height());}else{$(this).find(".graphic img").css("height",preImgHeight);}}});},renderMultiTabProductCarousel:function(componentId){var sliders=[];var containerObj=$('#'+componentId+' .swiper-container');containerObj.addClass('s'+componentId);containerObj.find('.swiper-button-next').addClass('r'+componentId);containerObj.find('.swiper-button-prev').addClass('l'+componentId);var slider=new Swiper('#'+componentId+' .swiper-container',{direction:'horizontal',slidesPerView:3,spaceBetween:5,loop:false,simulateTouch:false,mousewheel:true,navigation:{nextEl:'.r'+componentId,prevEl:'.l'+componentId},on:{slideNextTransitionStart:function(){lazyImage.init();}}});sliders.push(slider);if($('body').hasClass('tablet')&$(window).width()<=763){for(var slider in sliders){sliders[slider].params.slidesPerView=2.9;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<400){for(var slider in sliders){sliders[slider].params.slidesPerView=2;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<480){for(var slider in sliders){sliders[slider].params.slidesPerView=2.3;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<640){for(var slider in sliders){sliders[slider].params.slidesPerView=2.7;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<766){for(var slider in sliders){sliders[slider].params.slidesPerView=3.7;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<=960){for(var slider in sliders){sliders[slider].params.slidesPerView=2.9;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<=1024){for(var slider in sliders){sliders[slider].params.slidesPerView=4.3;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<=1250){for(var slider in sliders){sliders[slider].params.slidesPerView=4.6;sliders[slider].params.spaceBetween=0;}}else{for(var slider in sliders){sliders[slider].params.slidesPerView=5;sliders[slider].params.spaceBetween=0;}}
for(var slider in sliders){sliders[slider].update();}
$(window).resize(function(){if($('body').hasClass('tablet')&$(window).width()<=763){for(var slider in sliders){sliders[slider].params.slidesPerView=2.9;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<400){for(var slider in sliders){sliders[slider].params.slidesPerView=2;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<480){for(var slider in sliders){sliders[slider].params.slidesPerView=2.3;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<640){for(var slider in sliders){sliders[slider].params.slidesPerView=2.8;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<766){for(var slider in sliders){sliders[slider].params.slidesPerView=4;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<=960){for(var slider in sliders){sliders[slider].params.slidesPerView=4;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<=1024){for(var slider in sliders){sliders[slider].params.slidesPerView=4.2;sliders[slider].params.spaceBetween=0;}}else if($(window).width()<=1250){for(var slider in sliders){sliders[slider].params.slidesPerView=4.5;sliders[slider].params.spaceBetween=0;}}else{for(var slider in sliders){sliders[slider].params.slidesPerView=5;sliders[slider].params.spaceBetween=0;}}
for(var slider in sliders){sliders[slider].update();}
if(Fn.isTabletView()||Fn.isMobileView()){$(".product-promote-container .promo-product-banner .desktop").addClass("promo-banner-height");}else{$(".product-promote-container .promo-product-banner .desktop").removeClass("promo-banner-height");}});},getProductCarouselTabById:function(id,processor){$.ajax({type:"GET",dataType:"html",url:"view/PnsAdvancedProductCarouselTabComponentController?componentUid="+id,success:function(data){var html=$(data);$("#"+id+" .swiper-container .swiper-wrapper").html("");html.find(".swiper-container .swiper-slide").appendTo("#"+id+" .swiper-container .swiper-wrapper");if(processor!=undefined){processor(id);}
Home.renderMultiTabProductCarousel(id);lazyImage.init();PLPUtils.Modules.PLP.renderProductEvent();}});},selectedProductCarouselTabById:function(id){if(Fn.isDesktopView()){var that=$("#"+id);$(that).parent().find(".tabpage.selected").removeClass("selected");$(that).parent().find(".tabpage .tab-button .my-tab-title.selected").removeClass("selected");$(that).addClass("selected");$(that).find(" .tab-button .my-tab-title").addClass("selected");var tabpage=$(that).parent().find(".tabpage");var colNumber=$(tabpage).length;var tabWidth=100/colNumber;var tabIndex=$(tabpage).index($(that));$("#"+id).parent().find('.tab-line').css('left',tabIndex*tabWidth+'%');}
Home.renderMultiTabProductCarousel(id);},bindEventForProductCarouselTab:function(){$(".productTabContainer.Panel-ProductDetail .tabpage .tab-button").on("click",function(){var id=$(this).parent().attr("id");if($(this).parent().find(".tab-content .swiper-container .swiper-slide").length==0){Home.getProductCarouselTabById(id,Home.selectedProductCarouselTabById);}else{Home.selectedProductCarouselTabById(id);}});},resetTabArrow:function(){$(".productTabContainer.Panel-ProductDetail").each(function(){var maxFontSize=0;$(this).find(".tabpage .tab-button > span").each(function(index,ele){var fontSize=$(ele).outerHeight();maxFontSize=fontSize>=maxFontSize?fontSize:maxFontSize;});$(this).find(".tab-padding").css("height",25+maxFontSize+"px");$(this).find(".tabpage .tab-button").each(function(index,ele){$(ele).css("height",25+maxFontSize+"px");var outerHeight=$(ele).find("> span").outerHeight();var top=$(ele).find("> span").position().top;$(ele).find("> .arrow-down").css("top",outerHeight+top-2);});});}}
$(function(){var browserRule=/^.*((iPhone)|(iPad)|(Safari))+.*$/;if(browserRule.test(navigator.userAgent)){window.onpageshow=function(event){if(event.persisted){window.location.reload()}};}});var itemSwiperContainer={init:function()
{this.container=$('.plp-item-swiper-container.swiper-container');this.render();},render:function()
{var $container=this.container;if($container.length){$container.each(function(index,element){$(this).addClass('swiper-'+index);$(this).find('.item-button-prev').addClass('swiper-prev-'+index);$(this).find('.item-button-next').addClass('swiper-next-'+index);productSwiper=new Swiper('.swiper-'+index,{slidesPerView:'auto',spaceBetween:0,loop:false,navigation:{nextEl:".swiper-next-"+index,prevEl:".swiper-prev-"+index},on:{slideNextTransitionStart:function(){lazyImage.init();}}});});};}};var bannerSwiperContainer={init:function()
{this.container=$('.plp-banner-swiper-container.swiper-container');this.render();},render:function()
{var $container=this.container;var plpSlideBanner=$('.plp-banner-swiper-container.swiper-container .swiper-slide');if($container.length&&plpSlideBanner!=null&&plpSlideBanner.length>1){bannerSwiper=new Swiper($container,{spaceBetween:1,autoplay:{delay:5000,disableOnInteraction:false},loop:true,pagination:{el:$container.find('.swiper-pagination'),clickable:true,renderBullet:function(index,className){return'<span class="'+className+'">'+(index+1)+'</span>';},},});if($(".swiper-pagination span")!=null&&$("body").width()<1025){$(".swiper-pagination span").html("")}};}};var priceRangeContainer={init:function()
{this.container=$('.plp-price-range-container');this.priceRange=this.container.find('.price-range');this.rangeSlider=this.priceRange.find('.range-slider');this.min=this.priceRange.find('input[name=valMin]');this.max=this.priceRange.find('input[name=valMax]');this.rangeMaxNum=this.rangeSlider.attr('data-range-max');this.minNum=this.min.val();this.maxNum=this.max.val();this.render();},render:function()
{var $container=this.container;if($container.length){$container.each(function(){var $priceRange=$(this).find('.price-range'),$rangeSlider=$priceRange.find('.range-slider'),$min=$priceRange.find('input[name=valMin]'),$max=$priceRange.find('input[name=valMax]'),rangeMaxNum=$rangeSlider.attr('data-range-max'),minNum=$min.val(),maxNum=$max.val();$min.val('$'+minNum);$max.val('$'+maxNum);$rangeSlider.slider({range:true,min:0,max:rangeMaxNum,values:[minNum,maxNum],step:1,slide:function(event,ui){$(this).addClass('range-sliding');if(ui.values[0]==ui.values[1]){if(ui.values[0]!=0){$priceRange.find('input[name=valMin]').val('$'+parseInt(ui.values[0]-1));$priceRange.find('input[name=valMax]').val('$'+ui.values[1]);};}else{$priceRange.find('input[name=valMin]').val('$'+ui.values[0]);$priceRange.find('input[name=valMax]').val('$'+ui.values[1]);};}});$min.keyup(function(){var minNum=parseInt($(this).val().replace('$','')!=''?$(this).val().replace('$',''):0),maxNum=parseInt($(this).closest('.range-input').find('input[name=valMax]').val().replace('$',''));if(minNum<maxNum)
$rangeSlider.slider("values",[minNum,maxNum]);});$max.keyup(function(){var minNum=parseInt($(this).closest('.range-input').find('input[name=valMin]').val().replace('$','')),maxNum=parseInt($(this).val().replace('$','')!=''?$(this).val().replace('$',''):'');if(maxNum>minNum)
$rangeSlider.slider("values",[minNum,maxNum]);});$('.btn-clearAll').click(function(){$rangeSlider.slider("values",[0,rangeMaxNum]);$rangeSlider.removeClass('range-sliding');$priceRange.find('input[name=valMin]').val('$'+0);$priceRange.find('input[name=valMax]').val('$'+rangeMaxNum);});});};}};var searchContainer={init:function()
{this.container=$('.plp-search-container');this.searchInput=this.container.find('.search-input');this.filterKey;this.value;this.render();},alphaListScroll:function(scroll)
{var $alphaListContainer=$('.alpha-list-container'),$alphaListBody=$alphaListContainer.find('.alpha-list-body');$alphaList=$alphaListBody.find('.alpha-list'),$alphaListTitle=$alphaListBody.find('.alpha-list-title'),$alphaListMenu=$('.alpha-list-menu');$alphaList.find('> li').each(function(index){if($(this).is(':visible')){var $alphaTitle=$(this).find('[id*="alpha-"]'),pt=Math.round($alphaTitle.position().top),vp=Math.round($(window).scrollTop()-70);$alphaTitle.attr('data-point',pt);if(vp>=0){$alphaListTitle.addClass('show');if(vp>=$alphaTitle.attr('data-point')){$alphaListTitle.html($alphaTitle.text());if($alphaListMenu.length){var alphaSelect=$(this).find('[id*="alpha-"]').attr('id');$alphaListMenu.find('ul li').each(function(index){var alphaTitle=$(this).find('a').attr('href');if(scroll==true){if('#'+alphaSelect==alphaTitle)
$(this).addClass('selected');else
$(this).removeClass('selected');};});};};}else{if($alphaListMenu.length){if(scroll==true||scroll==null){$alphaListMenu.find('ul li').removeClass('selected');$alphaListMenu.find('ul li').each(function(index){if($(this).is(':visible')){$(this).addClass('selected');return false;};});};};$alphaListTitle.removeClass('show');};};});if(window.matchMedia("(orientation: portrait)").matches)
$alphaListMenu.show();else
$alphaListMenu.hide();},render:function()
{var $container=this.container,$searchInput=this.searchInput,filterKey=this.filterKey,value=this.value;if($container.length){$searchInput.find('.icon-close').click(function(){e.stopPropagation;$searchInput.find('input').val('');$searchInput.find('input').trigger("propertychange");$(this).hide();});$searchInput.find('input').bind('input propertychange',function(){var $searchList=$(this).closest($container).find('.search-list');filterKey=$(this).val().toLowerCase();$searchList.find('ul li').each(function(index){if(filterKey==""){$(this).show();}else{value=$(this).find('input').attr('data-filter').toLowerCase();if(value.indexOf(filterKey)>-1)
$(this).show();else
$(this).hide();}});if(filterKey=='')
$(this).closest('.search-input').find('.icon-close').hide();else
$(this).closest('.search-input').find('.icon-close').show();});var $alphaListContainer=$('.alpha-list-container'),$alphaListBody=$alphaListContainer.find('.alpha-list-body'),$alphaListMenu=$('.alpha-list-menu');scroll=true;if($alphaListBody.length){$searchInput.find('input').bind('input propertychange',function(){var $searchList=$(this).closest($container).find('.search-list');$searchList.find('ol.alpha-list > li').show();$searchList.find('ul').each(function(index){if($(this).find('li').is(':visible'))
$(this).closest('li').show();else
$(this).closest('li').hide();});$searchList.find('ol.alpha-list > li').each(function(index){if($(this).find('ul').length==0)
$(this).hide();});$alphaListMenu.find('ul li').each(function(index){var alphaTitle=$(this).find('a').attr('href'),$this=$(this);$searchList.find('ol.alpha-list > li').each(function(index){if('#'+$(this).find('.title').attr('id')==alphaTitle){if($(this).find('ul').length==0){$this.hide();}else{if($(this).is(':visible'))
$this.show();else
$this.hide();};};});});searchContainer.alphaListScroll();});$alphaListMenu.find('a').click(function(event){event.preventDefault();var n=$($(this).attr('href')).attr('data-point');searchContainer.alphaListScroll();scroll=false;$alphaListMenu.find('li').removeClass('selected');$(this).closest('li').addClass('selected');$(this).closest('.alpha-list-body').stop().animate({scrollTop:parseInt(n)+70},500,function(){scroll=true;});});$alphaListMenu.find('ul li').each(function(index){var alphaTitle=$(this).find('a').attr('href'),$this=$(this);$('.search-list').find('ol.alpha-list > li').each(function(index){if('#'+$(this).find('.title').attr('id')==alphaTitle){if($(this).find('ul').length==0){$this.hide();$(this).hide();};};});});$(window).resize(function(){searchContainer.alphaListScroll();});$(window).scroll(function(){searchContainer.alphaListScroll(scroll);});}};}};var navTabContainer={init:function()
{this.container=$('.plp-nav-tab-swiper-container');this.filterContainer=this.container.find('.plp-filter-label-container');this.navTab=this.container.find('.nav-tab');this.tabContent=this.container.find('.tab-content');this.nav=this.navTab.find('.nav');this.modal=$('.modal.filterModal');this.fliterLabel=$('.fliter-label');this.sortContainer=$('.plp-sort-container');this.mobileFilterSortMenuContainer=$('.mobile-filter-sort-menu-container');this.mobileSubTabMenuContainer=$('.mobile-subTab-menu-container');this.render();},hash:function()
{var $nav=this.nav,$tabContent=this.tabContent;$nav.find('a').click(function(){window.location.hash=this.hash;});if(window.location.hash){var hash=window.location.hash;$(window).scrollTop(0);$nav.find('li').each(function(index,element){if(hash==$(this).find('a').attr('href')){$(this).find('a').addClass('active');$tabContent.find(hash).addClass('active');return false;};if(index===($nav.find('li').length-1)){$nav.find('li:first-child a').addClass('active');$tabContent.find('.tab-pane:first-child').addClass('active');};});}else{$nav.find('li:first-child a').addClass('active');$tabContent.find('.tab-pane:first-child').addClass('active');};},swiper:function()
{var $container=this.container;navTabSwiper=new Swiper($container.find('.swiper-container'),{slidesPerView:'auto',spaceBetween:0,loop:false,});},label:function()
{var $container=this.container,$filterContainer=this.filterContainer,$navTab=this.navTab,$modal=this.modal,$tabContent=this.tabContent,$fliterLabel=this.fliterLabel,$sortContainer=this.sortContainer,$mobileFilterSortMenuContainer=this.mobileFilterSortMenuContainer,$mobileSubTabMenuContainer=this.mobileSubTabMenuContainer,mId,nId,bNum;var labels=function(checked,cVal,cName){if($filterContainer.length){var $labelList=$filterContainer.find('.label-list'),cName=cName!=null?cName:'',map={};$filterContainer.show();if(checked==true){if(cVal!=null){$labelList.find('ul').prepend('<li class="'+cName+'" data-value="'+cVal+'"><span>'+cVal+'</span><span class="pns-revamp-font-icons"><i class="icon-close"></i></span></li>');$labelList.find('.icon-close').click(function(){$fliterLabel.find('input[type="checkbox"][data-value="'+$(this).closest('li').data('value')+'"]').prop('checked',false).removeClass('selected');$(this).closest('li').remove();if($labelList.find('ul li').length==1)
$filterContainer.hide();if($(this).closest('.rangeLabel').length){$container.find($fliterLabel).find('.rangeChecked').prop('checked',false).removeClass('selected');$mobileSubTabMenuContainer.find($fliterLabel).find('.rangeChecked').prop('checked',false).removeClass('selected');}
badges();});$labelList.find('li').each(function(index,element){var value=$(this).data('value');if(map[value]==null){map[value]=true;}else{$(this).remove();};});}}else{$labelList.find('ul li[data-value="'+cVal+'"]').remove();if($labelList.find('ul li').length==1)
$filterContainer.hide();};}};var badges=function(){var sum=0;$navTab.find('li').each(function(index,element){nId=$(this).find('a').attr('href');mId=$(nId).find('.right-detail .button-tab').attr('data-target');if(mId!=null&&mId!="")
bNum=$(mId).find($fliterLabel).find('input.selected:checkbox:checked').length;else
bNum=$(nId).find($fliterLabel).find('input.selected:checkbox:checked').length;if($(nId).find($fliterLabel).find('.rangeChecked').is(':checked'))
bNum=bNum+1
if(bNum!=0){$(this).find('.badge-label').show();$(this).find('.badge-label').html(bNum);if($mobileSubTabMenuContainer.length){$(nId+'-box').find('.badge-label').show();$(nId+'-box').find('.badge-label').html(bNum);};}else{$(this).find('.badge-label').hide();$(this).find('.badge-label').html(parseInt(0));if($mobileSubTabMenuContainer.length)
$(nId+'-box').find('.badge-label').hide();};if($mobileFilterSortMenuContainer.length){if(bNum!=0){sum+=bNum
$mobileFilterSortMenuContainer.find('.filterTotal').html(sum);}else{sum-=bNum
$mobileFilterSortMenuContainer.find('.filterTotal').html(sum);}};});};var selected=function($div,value){$div.find($fliterLabel).find('input[type="checkbox"][data-value="'+value+'"]').prop('checked',true).addClass('selected');};var unSelected=function($div,value){$div.find($fliterLabel).find('input[type="checkbox"][data-value="'+value+'"]').prop('checked',false).removeClass('selected');};$container.find($fliterLabel).find('input[type="checkbox"]').click(function(){if($(this).prop('checked')){$(this).addClass('selected');if($modal.length)
selected($modal,$(this).data('value'));if($mobileSubTabMenuContainer.length)
selected($mobileSubTabMenuContainer,$(this).data('value'));}else{$(this).removeClass('selected');if($modal.length)
unSelected($modal,$(this).data('value'));if($mobileSubTabMenuContainer.length)
unSelected($mobileSubTabMenuContainer,$(this).data('value'));};labels($(this).prop('checked'),$(this).data('value'));badges();});$sortContainer.find($fliterLabel).find('input[type="checkbox"]').click(function(){if($(this).prop('checked')){$(this).addClass('selected');if($mobileSubTabMenuContainer.length)
selected($mobileSubTabMenuContainer,$(this).data('value'));}else{$(this).removeClass('selected');if($mobileSubTabMenuContainer.length)
unSelected($mobileSubTabMenuContainer,$(this).data('value'));}});if($modal.length){$modal.find('.btn-apply').click(function(){$(this).closest($modal).find($fliterLabel).find('input[type="checkbox"]').each(function(index,element){if($(this).prop('checked')){$(this).addClass('selected');selected($container,$(this).data('value'));if($mobileSubTabMenuContainer.length)
selected($mobileSubTabMenuContainer,$(this).data('value'));}else{$(this).removeClass('selected');unSelected($container,$(this).data('value'));if($mobileSubTabMenuContainer.length)
unSelected($mobileSubTabMenuContainer,$(this).data('value'));};labels($(this).prop('checked'),$(this).data('value'));badges();});});$modal.on('hidden.bs.modal',function(){$(this).find($fliterLabel).find('input.selected[type="checkbox"]').prop('checked',true);$(this).find($fliterLabel).find('input[type="checkbox"]:not(.selected)').prop('checked',false);});$modal.find('.btn-clearAll').click(function(){$(this).closest($modal).find($fliterLabel).find('input[type="checkbox"]').prop('checked',false);$(this).closest($modal).find($fliterLabel).find('input[type="checkbox"]').removeClass('selected');$(this).closest($modal).find($fliterLabel).find('input[type="checkbox"]').each(function(index,element){unSelected($container,$(this).data('value'));if($mobileSubTabMenuContainer.length)
unSelected($mobileSubTabMenuContainer,$(this).data('value'));labels($(this).prop('checked'),$(this).data('value'));badges();});});}
if($mobileSubTabMenuContainer.length){$mobileSubTabMenuContainer.find($fliterLabel).find('input[type="checkbox"]').click(function(){if($(this).prop('checked'))
$mobileSubTabMenuContainer.find($fliterLabel).find('input[type="checkbox"][data-value="'+$(this).data('value')+'"]').prop('checked',true);else
$mobileSubTabMenuContainer.find($fliterLabel).find('input[type="checkbox"][data-value="'+$(this).data('value')+'"]').prop('checked',false);var $idSecondSubTab='#'+$(this).closest('.secondSubTab').attr('id'),selectNum=0,total;if($(this).closest($fliterLabel).find('li.showAll').length){total=$($(this).closest($fliterLabel).find('li.showAll a').data('target')).find($fliterLabel).find('input:checkbox:checked').length;$(this).closest($fliterLabel).attr('data-selected',total);}else{total=$(this).closest($fliterLabel).find('input:checkbox:checked').length;$(this).closest($fliterLabel).attr('data-selected',total);}
if($(this).closest('.secondSubTab').length){$(this).closest('.mobile-subTab-menu-container').find('#filterSubTab .subTab-box .subTab-container').each(function(index,element){if($idSecondSubTab==$(this).find('li.showAll a').data('target'))
$(this).find($fliterLabel).attr('data-selected',total);});$(this).closest('.mobile-subTab-menu-container').find('#filterSubTab .subTab-box .subTab-container').each(function(index,element){if($idSecondSubTab==$(this).find('li.showAll a').data('target')){$(this).closest('.label-list').find('.subTab-container').each(function(index,element){if($(this).find($fliterLabel).attr('data-selected')!=null)
selectNum+=parseInt($(this).find($fliterLabel).attr('data-selected'));});if(selectNum!=0)
$(this).closest('.subTab-box').find('.badge-label').html(selectNum).show();else
$(this).closest('.subTab-box').find('.badge-label').html(0).hide();};});}else{$(this).closest('.label-list').find('.subTab-container').each(function(index,element){if($(this).find($fliterLabel).attr('data-selected')!=null)
selectNum+=parseInt($(this).find($fliterLabel).attr('data-selected'));});if(selectNum!=0)
$(this).closest('.subTab-box').find('.badge-label').html(selectNum).show();else
$(this).closest('.subTab-box').find('.badge-label').html(0).hide();};});$mobileSubTabMenuContainer.find('.btn-apply').click(function(){$(this).closest($mobileSubTabMenuContainer).find($fliterLabel).find('input[type="checkbox"]').each(function(index,element){if($(this).prop('checked')){$(this).addClass('selected');selected($container,$(this).data('value'));selected($sortContainer,$(this).data('value'));if($modal.length)
selected($modal,$(this).data('value'));}else{$(this).removeClass('selected');unSelected($container,$(this).data('value'));unSelected($sortContainer,$(this).data('value'));if($modal.length)
unSelected($modal,$(this).data('value'));};labels($(this).prop('checked'),$(this).data('value'));badges();});var $priceRangeContainer=$mobileSubTabMenuContainer.find('.plp-price-range-container'),$priceRange=$priceRangeContainer.find('.price-range'),$min=$priceRange.find('input[name=valMin]'),$max=$priceRange.find('input[name=valMax]'),minNum=parseInt($min.val().replace('$','')),maxNum=parseInt($max.val().replace('$','')),ptext='$'+minNum+' '+$priceRange.find('.range-input span').html()+' $'+maxNum;if($priceRange.find('.range-slider').hasClass('range-sliding')){$container.find($fliterLabel).find('.rangeChecked').prop('checked',true).addClass('selected');$mobileSubTabMenuContainer.find($fliterLabel).find('.rangeChecked').prop('checked',true).addClass('selected');if(minNum<maxNum&&maxNum>0){if($filterContainer.find('.label-list .rangeLabel').length){$filterContainer.find('.label-list .rangeLabel').attr('data-value',ptext);$filterContainer.find('.label-list .rangeLabel span:first-child').text(ptext);}else{labels(true,ptext,'rangeLabel');badges();};};};});$mobileSubTabMenuContainer.find('.btn-close').click(function(){$(this).closest($mobileSubTabMenuContainer).find($fliterLabel).find('input[type="checkbox"]').prop('checked',false);badges();});$mobileSubTabMenuContainer.find('.btn-clearAll').click(function(){$(this).closest($mobileSubTabMenuContainer).find($fliterLabel).find('input[type="checkbox"]').prop('checked',false);$(this).closest($mobileSubTabMenuContainer).find($fliterLabel).find('input[type="checkbox"]').removeClass('selected');$container.find($fliterLabel).find('.rangeChecked').prop('checked',false).removeClass('selected');$mobileSubTabMenuContainer.find($fliterLabel).find('.rangeChecked').prop('checked',false).removeClass('selected');$(this).closest($mobileSubTabMenuContainer).find($fliterLabel).find('input[type="checkbox"]').each(function(index,element){unSelected($container,$(this).data('value'));$filterContainer.find('.label-list ul li:not(:last-child)').remove();unSelected($sortContainer,$(this).data('value'));if($modal.length)
unSelected($modal,$(this).data('value'));labels($(this).prop('checked'),$(this).data('value'));badges();});});};$filterContainer.find('.btn-clearAll').click(function(){$fliterLabel.find('input.selected[type="checkbox"]').prop('checked',false).removeClass('selected');$filterContainer.find('.label-list ul li:not(:last-child)').remove();$navTab.find('li').find('.badge-label').hide();$mobileFilterSortMenuContainer.find('.filterTotal').html(0);$mobileSubTabMenuContainer.find('.badge-label').html(0).hide();$filterContainer.hide();});$tabContent.find('.btn-priceRange').click(function(){var $priceRangeContainer=$('.plp-price-range-container'),$priceRange=$priceRangeContainer.find('.price-range'),$min=$priceRange.find('input[name=valMin]'),$max=$priceRange.find('input[name=valMax]'),minNum=parseInt($min.val().replace('$','')),maxNum=parseInt($max.val().replace('$','')),ptext='$'+minNum+' '+$priceRange.find('.range-input span').html()+' $'+maxNum;$container.find($fliterLabel).find('.rangeChecked').prop('checked',true).addClass('selected');$mobileSubTabMenuContainer.find($fliterLabel).find('.rangeChecked').prop('checked',true).addClass('selected');if(minNum<maxNum&&maxNum>0){if($filterContainer.find('.label-list .rangeLabel').length){$filterContainer.find('.label-list .rangeLabel').attr('data-value',ptext);$filterContainer.find('.label-list .rangeLabel span:first-child').text(ptext);}else{labels(true,ptext,'rangeLabel');badges();};};});$fliterLabel.find('input.selected[type="checkbox"]').prop('checked',true);$fliterLabel.find('input.selected[type="checkbox"]').attr('data-value',function(index,value){return labels(true,value);});badges();},render:function()
{var $container=this.container;if($container.length){this.hash();this.swiper();this.label();}}};var sortContainer={init:function()
{this.container=$('.plp-sort-container');this.modal=$('#sortMenuModal');this.render();},render:function()
{var $container=this.container,$modal=this.modal,selected,move,dp;if($container.length){selected=function($div){$div.closest('.sort-list').find('li').removeClass('selected');$div.addClass('selected');};move=function($div){$container.find('.sort-list .label').css({'width':$div.attr('data-width'),'left':parseInt($div.attr('data-left'))});};dp=function(){$container.find('.sort-list li').each(function(index){$(this).attr('data-width',$(this).innerWidth());$(this).attr('data-left',Math.round($(this).position().left));if($(this).index()==0&&$(this).hasClass('selected'))
$container.find('.sort-list .label').addClass('first');if($(this).index()==$container.find('.sort-list li').length-1&&$(this).hasClass('selected'))
$container.find('.sort-list .label').addClass('last');});};dp();move($container.find('.sort-list li.selected'));$container.find('.sort-list li').click(function(){if($(this).index()==0){$container.find('.sort-list .label').addClass('first');$container.find('.sort-list .label').removeClass('last');}else if($(this).index()==$container.find('.sort-list li').length-1){$container.find('.sort-list .label').addClass('last');$container.find('.sort-list .label').removeClass('first');}else{$container.find('.sort-list .label').removeClass('first last');}
move($(this));selected($(this));$modal.find('.sort-list li').removeClass('selected applied');$modal.find('.sort-list li[data-index='+$(this).data('index')+']').addClass('selected applied');});$modal.find('.sort-list li').click(function(){selected($(this));});$modal.find('.btn-apply').click(function(){var i=$modal.find('.sort-list li.selected').data('index');$modal.find('.sort-list li').removeClass('applied');$modal.find('.sort-list li.selected').addClass('applied');$container.find('.sort-list li').removeClass('selected applied');$container.find('.sort-list li[data-index='+i+']').addClass('selected applied');move($container.find('.sort-list li.applied'));});$modal.on("show.bs.modal",function(){$(this).find('.sort-list li').removeClass('selected');$(this).find('.sort-list li.applied').addClass('selected');});$(window).resize(function(){dp();move($container.find('.sort-list li.selected'));});};}};var mobileCategoryMenuContainer={init:function()
{this.container=$('.mobile-category-menu-container');this.dropdownBtn=this.container.find('.btn-dropdown');this.overlay=this.container.find('.overlay');this.navSelected();this.position();this.resize();this.render();},navSelected:function(){var $container=this.container,selected,move,dp;selected=function($div){$div.closest('ul').find('li').removeClass('active');$div.addClass('active');};move=function($div){$container.find('.menu-area .label').css({'width':$div.attr('data-width'),'left':parseInt($div.attr('data-left'))});};dp=function(){$container.find('.menu-area ul li').each(function(index){$(this).attr('data-width',$(this).innerWidth());$(this).attr('data-left',Math.round($(this).position().left));if($(this).index()==0&&$(this).hasClass('active'))
$container.find('.menu-area .label').addClass('first');if($(this).index()==$container.find('.detail .menu-area ul li').length-1&&$(this).hasClass('active'))
$container.find('.menu-area .label').addClass('last');});};dp();move($container.find('.menu-area ul li.active'));$container.find('.menu-area ul li').click(function(){if($(this).index()==0){$container.find('.menu-area .label').addClass('first');$container.find('.menu-area .label').removeClass('last');}else if($(this).index()==$container.find('.sort-list li').length-1){$container.find('.menu-area .label').addClass('last');$container.find('.menu-area .label').removeClass('first');}else{$container.find('.menu-area .label').removeClass('first last');}
move($(this));selected($(this));});$(window).resize(function(){dp();move($container.find('.menu-area ul li.active'));});},position:function(){var $container=this.container;var pTop=function(){var $headerHeight=50,$headerFloatMessage=$('.float-message').length?$('.float-message').height():0,$mobileFilterSortMenu=$('.mobile-filter-sort-menu-container').length?$('.mobile-filter-sort-menu-container').height():0;var isExistMarquee=$('.float-message').find('.marquee').children().length>0?true:false;if(!isExistMarquee){$(".mobile-filter-sort-menu-container").css("top",$headerHeight);$mobileFilterSortMenu=$('.mobile-filter-sort-menu-container').length?$('.mobile-filter-sort-menu-container').height()-5:0;}
if($container.length){if(window.matchMedia('(max-width: 1024px)').matches){if($(window).scrollTop()<300){$('header').removeClass('hide-float-message');$('header .main').css({'top':isExistMarquee?'':0});$container.css({'top':$mobileFilterSortMenu+$headerHeight+(isExistMarquee?$headerFloatMessage:0)});}else{$container.css({'top':$mobileFilterSortMenu});}};if(window.matchMedia('(min-width: 1025px)').matches){$container.css({'top':''});};};};pTop();$(window).scroll(function(){pTop();});$(window).resize(function(){pTop();});},resize:function(){var $container=this.container;$(window).resize(function(){if($container.is(':hidden')){$container.find('.detail').removeClass('dropOpen');$('footer .float').show();}});},render:function()
{var $container=this.container,$dropdownBtn=this.dropdownBtn,$overlay=this.overlay;if($container.length){var dropdownMenu=function(){$container.find('.detail').toggleClass('dropOpen');if($container.find('.detail').hasClass('dropOpen')){$('footer .float').hide();$('.promo-floating-banner').hide();}else{$('footer .float').show();$('.promo-floating-banner').show();}};$dropdownBtn.click(function(){dropdownMenu();});$overlay.click(function(){dropdownMenu();});$container.find('.swiper-container .swiper-slide').click(function(){$(this).parent().find('.swiper-slide').removeClass('active');$(this).addClass('active');$container.find('.dropdown-content li').removeClass('active');$container.find('.dropdown-content li[data-index='+$(this).data('index')+']').addClass('active');});$container.find('.dropdown-content li').click(function(){$(this).parent().find('li').removeClass('active');$(this).addClass('active');$container.find('.swiper-container li.swiper-slide').removeClass('active');$container.find('.swiper-container li.swiper-slide[data-index='+$(this).data('index')+']').addClass('active');});$(window).scroll(function(){if($('header').hasClass('hide-float-message')){$container.find('.detail').removeClass('dropOpen');$('footer .float').show();}});};}};var mobileSubTabMenuContainer={init:function()
{this.container=$('.mobile-subTab-menu-container');this.closeBtn=this.container.find('.subTab-header .btn-close');this.backBtn=this.container.find('.subTab-header .btn-back');this.subTabBtn=$('.btn-subTab');this.resize();this.render();},resize:function(){var $container=this.container;$(window).resize(function(){if($container.is(':hidden')){$container.find('.subTab').removeClass('subTabOpen');$('body').removeClass('openSubTab');$container.hide();}});},render:function()
{var $container=this.container,$closeBtn=this.closeBtn,$backBtn=this.backBtn,$subTabBtn=this.subTabBtn;var previousScrollY=0;if($container.length){$subTabBtn.click(function(){var target=$(this).attr('data-target');if(target=='#filterSubTab'){previousScrollY=window.scrollY;};$(window).scrollTop(0);$container.appendTo($("body"));$container.show();$container.find('.fliter-label input.selected[type="checkbox"]').prop('checked',true);$container.find('.subTab').removeClass('subTabOpen').hide();$(target).closest('.subTab').addClass('subTabOpen').show();$('body').addClass('openSubTab');searchContainer.alphaListScroll();});$closeBtn.click(function(){$container.find('.subTab').removeClass('subTabOpen');$('body').removeClass('openSubTab');$container.hide();$(window).scrollTop(previousScrollY);});$backBtn.click(function(){var $target='#'+$(this).closest('.subTab').attr('id');$(this).closest('.subTab').removeClass('subTabOpen').hide();$('#filterSubTab').addClass('subTabOpen').show();$('#filterSubTab .subTab-box').each(function(index,element){if($(this).find('.subTab-container').find('.showAll a').data('target')==$target){$(window).scrollTop(Math.round($(this).offset().top-60))};});});$container.find('.btn-apply').click(function(){$container.find('.subTab').removeClass('subTabOpen');$('body').removeClass('openSubTab');$container.hide();});};}};var swiperStyleContainer={init:function()
{this.style1();},style1:function()
{var $swiperStyle1=$('.swiper-style-1');if($swiperStyle1.length){$swiperStyle1.each(function(index,element){$(this).addClass('swiper-'+index);$(this).find('.swiper-button-prev').addClass('swiper-prev-'+index);$(this).find('.swiper-button-next').addClass('swiper-next-'+index);swiperStyle1=new Swiper('.swiper-'+index,{slidesPerView:'auto',spaceBetween:0,centeredSlides:true,loop:true,navigation:{nextEl:".swiper-next-"+index,prevEl:".swiper-prev-"+index}});});};}};var mobileTop={init:function()
{this.container=$('.mobileTop');this.render();},render:function()
{var $container=this.container;var pTop=function(){var $mobileFilterSortMenu=$('.mobile-filter-sort-menu-container'),$mobileCategoryMenu=$('.mobile-category-menu-container');var isExistMarquee=$('.float-message').find('.marquee').children().length>0?true:false;if($container.length){if(window.matchMedia('(max-width: 1024px)').matches){if($(window).scrollTop()<300){if($mobileFilterSortMenu.length){if($mobileCategoryMenu.length){if(!isExistMarquee){$container.css({'margin-top':$mobileCategoryMenu.height()+$mobileFilterSortMenu.height()-5});}else{$container.css({'margin-top':$mobileCategoryMenu.height()+$mobileFilterSortMenu.height()});}}else{$container.css({'margin-top':$mobileFilterSortMenu.height()});}};};};if(window.matchMedia('(min-width: 1025px)').matches){$container.css({'margin-top':''});};};};pTop();$(window).scroll(function(){pTop();});$(window).resize(function(){pTop();});}};var modal={init:function()
{$('a[data-toggle="modal"]').click(function(){$($(this).attr('data-target')).appendTo($("body"));});}};$(document).ready(function()
{itemSwiperContainer.init();bannerSwiperContainer.init();mobileCategoryMenuContainer.init();mobileSubTabMenuContainer.init();mobileTop.init();modal.init();$(window).resize(function(){$('.modal').modal('hide');});});var mobileCleanAll=false;var floatBottom=null;var previousScrollY=0;var JSONUtils=(function($){var Config={JSON_KEY:"data-cart",};var _JSONUtils={getJson:function(_this){try{var jsonStr=$(_this).attr(Config.JSON_KEY);if(this.isJSON(jsonStr)){jsonStr=$.base64.decode(jsonStr);return JSON.parse(jsonStr);}
return"";}catch(e){console.info("get json error:"+e);return"";}},setJson:function(_this,extJson){try{if(extJson!=null&&extJson!=""){var json=this.getJson(_this);var newJson=$.extend({},json,extJson);var jsonStr=JSON.stringify(newJson);$(_this).attr(Config.JSON_KEY,$.base64.encode(jsonStr));}}catch(e){console.info("set Json Val error",e);return jsonStr;}},getJsonVal:function(json,key){try{if(json&&typeof json=="object"){return json[""+key+""];}}catch(e){console.info("get Json Val error:"+e);return"";}},isJSON:function(str){if(str!=""&&str!=null&&typeof str=='string'){try{str=$.base64.decode(str);var obj=JSON.parse(str);if(typeof obj=='object'&&obj){return true;}else{return false;}}catch(e){console.log('error json:'+str+'!!!'+e);return false;}}
return false;}}
return _JSONUtils;})(jQuery);var AjaxUtils=(function($){var _AjaxUtils={SendAjax:function(form_data,url,successCall,methodType,dataType,isAsync,errorCall){showLoadingDiv();if(methodType==undefined||methodType==null)
methodType="get";if(dataType==undefined||dataType==null)
dataType="html";$.ajax({type:methodType,url:url,data:form_data,cache:false,async:isAsync,dataType:dataType,success:function(responseData){if(successCall!=undefined&&successCall!=null&&typeof(successCall)=='function'){successCall.call(this,responseData);}else{callback(responseData,0);}},error:function(responseData){console.log("ajax error.");if(errorCall!=undefined&&errorCall!=null&&typeof(errorCall)=='function'){errorCall.call(this,responseData);}else{callback(responseData,0);}
closeLoadingDiv();},complete:function(responseData){setTimeout(function(){closeLoadingDiv();},1200);}});return false;},AddToCart:{request:function(_this,data){var success=function(responseData){AjaxUtils.AddToCart.response(_this,data,responseData);}
cdoGet(data,"/cart/add",success);},response:function(_this,data,responseData){var entryNumber=$(responseData).find('#entryNumber_'+data.productCodePost).html();JSONUtils.setJson(_this,{"entryNumber":entryNumber});}},UpdateCartQty:{request:function(_this,url,data,addToCart,addToCartForm,totalQuantity){var success=function(responseData){AjaxUtils.UpdateCartQty.response(_this,addToCart,addToCartForm,totalQuantity,responseData);}
AjaxUtils.SendAjax(data,url,success,"get","html",undefined,success);},response:function(_this,addToCart,addToCartForm,totalQuantity,responseData){var isAddQty=$(_this).hasClass("btn-plus");var isMinusQty=$(_this).hasClass("btn-minus");if(totalQuantity==0){JSONUtils.setJson(addToCart,{"entryNumber":""});}
var jsonObj;var isJson=true;try{jsonObj=$.parseJSON(responseData);}catch(err){isJson=false;JSONUtils.setJson(addToCart,{"entryNumber":(totalQuantity==0?"":"0")});}
var oldEntryNumber=JSONUtils.getJsonVal(addToCart,"entryNumber");if(jsonObj!=null&&isAddQty&&(jsonObj.result==null||(jsonObj.result&&jsonObj.result.entry==null&&oldEntryNumber!=""))){isJson=false;}
var obj=new Object();if(isJson){var val="";if(totalQuantity!=0&&jsonObj.result&&jsonObj.result.entry){val=jsonObj.result.entry.entryNumber;}
JSONUtils.setJson(addToCart,{"entryNumber":val});obj.totalItems=jsonObj.totalEntriesInCart;HeaderMyCart.doRefresh(obj);if(isAddQty){Header.quickMenu.showAddedCart();}
if(isMinusQty){Header.quickMenu.showRemovedCart();if(obj!=null&&obj.totalItems==0){$(addToCartForm).find('.input-number .text').html(1);JSONUtils.setJson(addToCart,{"qty":1});}}
HeaderMyCart.setWmCartPopPosition();}}},Sort:{request:function(_this,data){var url=$("#plpForm").attr("action")==undefined?"#":$("#plpForm").attr("action");var success=function(responseData){AjaxUtils.Sort.response(_this,responseData,url);}
AjaxUtils.SendAjax(data,url,success,"get","html",true);},response:function(_this,responseData,url){AjaxUtils.Filter.response(_this,responseData,url);}},Filter:{request:function(_this,data){var url=$("#plpForm").attr("action")==undefined?"#":$("#plpForm").attr("action");var success=function(responseData){AjaxUtils.Filter.response(_this,responseData,url);}
AjaxUtils.SendAjax(data,url,success,"get","text",true);},response:function(_this,responseData,url){$(".plp-filter-list-container").html($(responseData).find(".plp-filter-list-container").html());$(".plp-sort-container").html($(responseData).find(".plp-sort-container").html());$(".plp-nav-tab-swiper-container").html($(responseData).find(".plp-nav-tab-swiper-container").html());$(".dialogContents").html($(responseData).find(".dialogContents").html());$("#product-list .totalNumber").html($(responseData).find("#product-list .totalNumber").html());if(url!=undefined&&url!=null){$("#plpForm").attr("action",url);}
$(".mobile-subTab-menu-container").html($(responseData).find(".mobile-subTab-menu-container").html());$(".plp-filter-label-container").show();var hasFilterId=false;var filterId=$(".product-list").attr("data-fiterId");if(filterId!=null&&filterId!=undefined){if($(filterId).length>0){$(filterId).addClass("active");$("a[data-id='"+filterId+"']").addClass("active");hasFilterId=true;}}
if(!hasFilterId){$(".plp-nav-tab-swiper-container .tab-content .tab-pane:first").addClass("active").siblings().removeClass("active");$(".plp-nav-tab-swiper-container .nav-tab .nav a:first").addClass("active").siblings().removeClass("active");}
modal.init();mobileSubTabMenuContainer.init();PLPUtils.Modules.PLP.render();PLPUtils.Events.setGlobalFacetQuery($("#plpForm").find("input[name='q']").val());if(!Fn.isDesktopView()){mobileCategoryMenuContainer.init();mobileTop.render();$("html, body").animate({scrollTop:0},1);}}},RemoveFilter:{request:function(url,data){var formUrl=$("#plpForm").attr("action")==undefined?"#":$("#plpForm").attr("action");var success=function(responseData){AjaxUtils.RemoveFilter.response(null,responseData,formUrl);}
AjaxUtils.SendAjax(data,url,success,"get","html",true);},response:function(_this,responseData,url){AjaxUtils.Filter.response(null,responseData,url);}},NotifyMe:{request:function(_this,url,data){var success=function(responseData){AjaxUtils.NotifyMe.response(_this,responseData);}
AjaxUtils.SendAjax(data,url,success,"post","html",false,success);},response:function(_this,responseData){if($(responseData).find("#notificationPam").data('islogin')!=true){window.location="/login?explicit=true";return;}
var tipsOf=$(_this).parent(".button.cartButton");ProductTips.Events.showAt(tipsOf,ProductTips.NotifyTips);var productDetailContainer=$(_this).parents(".productDetailContainer");var notifyMeBtns=$(productDetailContainer).find(".notifyMe.button");if($(notifyMeBtns).length>1){$(notifyMeBtns).addClass("disabled isNotifyedProductFlag");$(notifyMeBtns).find(".notify-me .icon-notify").remove();$(notifyMeBtns).find(".notify-me span.text").html(function(){return $(this).data("arrivalsoon");})}else{$(tipsOf).addClass("isNotifyedProductFlag");$(_this).find(".icon-notify").remove();$(_this).closest(".button").addClass("disabled");$(_this).find("span.text").html(function(){return $(this).data("arrivalsoon");});}
ProductTips.click_index=0;}},ShowMore:{request:function(_this,url,data){var success=function(responseData){AjaxUtils.ShowMore.response(_this,responseData);}
AjaxUtils.SendAjax(data,url,success,"get","text",true,success);},response:function(_this,responseData){var container=$(".plp-filter-list-container");var itemSize=$(".product-container").find(".item").length;$(container).find(".product-container").append($(responseData).find(".product-container").html());$(container).find(".showMore").remove();$(container).append($(responseData).find(".plp-filter-list-container").find(".showMore"));PLPUtils.Modules.PLP.renderProductEvent();try{PLPUtils.Modules.GTM.gtmProductImpressions(itemSize);}catch(e){}}}};return _AjaxUtils;})(jQuery);var PLPUtils={ClickTimer:0,PageSize:35,init:function(){this.Modules.PLP.init();PaginationProductList.initPdpStateChange();navTabRevampContainer.init();},Modules:{PLP:{init:function(){this.render();PLPUtils.Events.descriptionClamp();},render:function(){this.renderProductEvent();PLPUtils.Events.isExistComponent();priceRangeRevampContainer.init();itemSwiperContainer.init();swiperStyleContainer.init();PLPUtils.Events.initCategoryContainer();PLPUtils.Events.plpRevampFilter();PLPUtils.Events.removeFilter();PLPUtils.Events.clearAllFilter();PLPUtils.Events.clearFilterDialog();PLPUtils.Events.applyFilterDialog();PLPUtils.Events.sort();PLPUtils.Events.showPlus();PLPUtils.Events.allDialogClick();PLPUtils.Events.priceFilterConvert();PLPUtils.Events.plpRevampFilterForMobile();PLPUtils.Events.applyFilterForMobile();PLPUtils.Events.clearAllFilterForMobile();PLPUtils.Events.priceComfirm();PLPUtils.Events.goFilterForMobile();PLPUtils.Events.showFilterCountForMobile();PLPUtils.Events.closeBtnClick();PLPUtils.Events.tabNumber();PLPUtils.Events.tabNumberForMobile(true);searchContainer.init();},renderProductEvent:function(){Tooltip.init();ProductTips.init();WishList.init();PLPUtils.Events.addToCart();PLPUtils.Events.plusAndMinus();PLPUtils.Events.inputNumber();PLPUtils.Events.showMoreProduct();if($("#product-list").length>0){PaginationProductList.init();}},renderLayout:function(){mobileCategoryMenuContainer.init();mobileTop.init();bannerSwiperContainer.init();}},GTM:{gtmHomeProductBtn:function(item,result){GTMPLPAddToCart(item,result);},gtmProductImpressions:function(itemSize){if($(".homeProductCarousel").length&&$(".gtmInfo").length){try{var productPos=1;var productInfoArr=[];$('.homeProductCarousel').each(function(index){if(index+1>itemSize){var variantCode=$(this).data("gtm-homeproductcarousel-id");variantCode=variantCode.replace("BP_","");productInfoArr.push({'name':$(this).data("gtm-homeproductcarousel-name"),'id':variantCode,'price':''+$(this).data("gtm-homeproductcarousel-price"),'brand':$(this).data("gtm-homeproductcarousel-brand"),'category':$(this).data("gtm-homeproductcarousel-category"),'variant':variantCode,'list':$(".gtmInfo").data("gtm-page-list"),'position':itemSize+productPos});productPos++;}});var arrCurrent=0;var arrToBePush=0;while(productInfoArr.length-arrCurrent>0){if(productInfoArr.length-arrCurrent>16){arrToBePush=16;}else{arrToBePush=productInfoArr.length-arrCurrent;}
dataLayer.push({'event':'impression','ecommerce':{'impressions':productInfoArr.slice(arrCurrent,arrCurrent+arrToBePush)}});arrCurrent=arrCurrent+16;}
$('.mobile .product-container .item a').click(function(){gtmPLPClick($(this).parents(".padding").children('.homeProductCarousel'),'other page');});}catch(e){}}}}},Events:{addToCart:function(){$(".add-to-cart").off("click").on("click",function(){var _this=this;var formData=new Object();var cartJson=JSONUtils.getJson(_this);formData.productCodePost=JSONUtils.getJsonVal(cartJson,"productCode");formData.qty=JSONUtils.getJsonVal(cartJson,"qty");var addedQuantity=JSONUtils.getJsonVal(cartJson,"addedQuantity");var tips=$(_this).parents(".button.cartButton");$(_this).parents(".button").addClass("selected");if(PLPUtils.Events.isMaxAllowedBuyQty(cartJson)){ProductTips.Events.showAt(tips,ProductTips.MaximumTips);return;}
var isComeFromOneDollarZone=JSONUtils.getJsonVal(cartJson,"isComeFromOneDollarZone");if(PLPUtils.Events.isComeFromOneDollarZone()||isComeFromOneDollarZone=="true"){formData.isComeFromOneDollarZone=true;}
AjaxUtils.AddToCart.request(_this,formData);PLPUtils.Modules.GTM.gtmHomeProductBtn($(_this),"add");});},plusAndMinus:function(){$(".product-container").find(".btn-plus, .btn-minus").on("click",function(){var _this=this;var addToCartForm=$(_this).closest('form');var addToCart=$(addToCartForm).find(".add-to-cart");var cartJson=JSONUtils.getJson(addToCart);var tipsOf=$(this).parents(".button.cartButton");var currQuantity=$(_this).parent().find('.text').html();var entryNumber=JSONUtils.getJsonVal(cartJson,"entryNumber");var productCode=JSONUtils.getJsonVal(cartJson,"productCode");var addedQuantity=JSONUtils.getJsonVal(cartJson,"addedQuantity");JSONUtils.setJson(addToCart,{"qty":currQuantity});var totalQuantity=parseInt(currQuantity)+parseInt(addedQuantity);if(!$(_this).closest('.button').hasClass("selected")){totalQuantity=parseInt(addedQuantity);}
var isAddQty=$(_this).hasClass("btn-plus");var isMinusQty=$(_this).hasClass("btn-minus");if(PLPUtils.Events.isMaxAllowedBuyQty(cartJson,true)){var qty=parseInt(currQuantity)-1>0?parseInt(currQuantity)-1:1;$(addToCartForm).find('.input-number .text').html(qty);JSONUtils.setJson(addToCart,{"qty":qty});if(isAddQty){setTimeout(function(){ProductTips.Events.showAt(tipsOf,ProductTips.MaximumTips);});}
return;}
PLPUtils.Modules.GTM.gtmHomeProductBtn($(this),isAddQty?"add":"remove");var url="/cart/updateQtyOnly?entryNumber="+entryNumber+"&quantity="+totalQuantity+"&productCodePost="+productCode;if(totalQuantity!=0){clearTimeout(PLPUtils.ClickTimer);PLPUtils.ClickTimer=setTimeout(function(){AjaxUtils.UpdateCartQty.request(_this,url,null,addToCart,addToCartForm,totalQuantity);},400);}else{AjaxUtils.UpdateCartQty.request(_this,url,null,addToCart,addToCartForm,totalQuantity);}});},inputNumber:function(){},isMaxAllowedBuyQty:function(json,orEqual){var maxAllowedBuyQty=parseInt(JSONUtils.getJsonVal(json,"maxAllowedBuyQty"));var addedQuantity=JSONUtils.getJsonVal(json,"addedQuantity");var currQuantity=JSONUtils.getJsonVal(json,"qty");var totalQuantity=parseInt(currQuantity)+parseInt(addedQuantity);if((totalQuantity>maxAllowedBuyQty)||(orEqual&&totalQuantity==maxAllowedBuyQty)){return true;}
return false;},isComeFromOneDollarZone:function(){var pathname=window.location.pathname;var isocode=Cookie.get("lang");var prefix="/en";if(isocode=="zt")
prefix="/zh-hk";if(pathname.startWith(prefix+"/dollarzone")){return true;}else{return false;}},updateNumber:function(_this){var obj_value=$(_this).parent().find(".text");var value=parseInt($(obj_value).html());var currQuantity=value;if($(_this).hasClass("btn-plus")){currQuantity=value+1;$(obj_value).html(currQuantity);}else{currQuantity-=1;if(currQuantity>=1){$(obj_value).html(currQuantity);}
else{$(_this).parents(".button").removeClass("selected");}}
return currQuantity;},showMoreProduct:function(){var container=$(".plp-filter-list-container");if($(container).length){if($(container).find(".product-container .item:first-child").is(":hidden"))
{$(container).find(".product-container .item:first-child").show();}
var totalItems=$(container).find(".product-container").data("product_list_total_items");var itemSize=$(container).find(".product-container .item").length;var leftItems=parseInt(totalItems)-parseInt(itemSize);if(leftItems<=0){$(container).find(".showMore").hide();}else{$("#itemLeftForProductList").html(leftItems);}}
$(container).find(".showMore").find("a").off("click").on("click",function(){var _this=this;var hasnextpage=$(_this).closest(".showMore").data("hasnextpage");if(!hasnextpage){return;}
var nextPageUrl=encodeURI($(_this).closest(".showMore").data("nextpageurl"));AjaxUtils.ShowMore.request(_this,nextPageUrl,null);});},sort:function(){var $container=$(".plp-sort-container");if($(".plp-sort-container").find(".sort-list li.selected").length<=0){$(".plp-sort-container").find(".sort-list li:first").addClass("selected applied");$("#sortMenuModal").find(".sort-list li:first").addClass("selected applied");}
sortContainer.init();$container.find(".sort-list li").off("click").on("click",function(){var form=$("#plpForm");var prefix=":";var sort=$(this).data("value");var query=$(form).find("input[name='q']");var queryString=$(query).val();var indexOfFirst=queryString.indexOf(prefix);var indexOfSecond=queryString.indexOf(prefix,indexOfFirst+1);if(indexOfSecond==-1){indexOfSecond=queryString.length;}
var strRep=queryString.substring(indexOfFirst,indexOfSecond);var strNew=prefix+sort;$(query).val(queryString.replace(strRep,strNew));$(form).find("input[name='resultsForPage']").val(PLPUtils.PageSize);AjaxUtils.Sort.request(this,$(form).serialize());});$("#sortMenuModal").find("li").off("click").on("click",function(){$(this).closest('.sort-list').find('li').removeClass('selected');$(this).addClass('selected');});$("#sortMenuModal").find('.btn-apply').off("click").on("click",function(){var i=$("#sortMenuModal").find(".sort-list li.selected").data("index");$container.find(".sort-list li").removeClass("selected");$container.find(".sort-list li[data-index="+i+"]").addClass('selected');$container.find(".sort-list .label").css({"width":$container.find(".sort-list li.selected").attr("data-width"),"left":parseInt($container.find(".sort-list li.selected").attr('data-left'))});$container.find(".sort-list li[data-index="+i+"]").trigger("click");});},plpRevampFilter:function(){$(".plp-nav-tab-swiper-container .nav-tab .nav").find("a").off("click").on("click",function(e){e.preventDefault();$(this).closest("ul").find("a").removeClass("active");var id=$(this).data("id");$(".plp-nav-tab-swiper-container .tab-content .tab-pane").removeClass("active").hide();$(id).addClass("active").show();$("a[data-id='"+id+"']").addClass("active");$(".product-list").attr("data-fiterId",id);});$('.plp-nav-tab-swiper-container .fliter-label').find("input[type='checkbox']").off("click").on("click",function(){var currentQueryFilter=$(this).data("query");var form=$("#plpForm");var query=$(form).find("input[name='q']");var queryString=$(query).val();if($(this).hasClass("selected")){var name=$(this).data("value");$(".plp-filter-label-container .label-list li").each(function(index,e){if($(this).data("value")==name){var removeUrl=$(this).data("remove_query_url");removeUrl=encodeURI(removeUrl);AjaxUtils.RemoveFilter.request(removeUrl,null);}});}else{$(query).val(currentQueryFilter);AjaxUtils.Filter.request(this,$(form).serialize());}});},removeFilter:function(){$(".plp-filter-label-container .icon-close").off("click").click(function(){var removeUrl=$(this).parent().parent().data("remove_query_url");removeUrl=encodeURI(removeUrl);AjaxUtils.RemoveFilter.request(removeUrl,null);});},clearAllFilter:function(){$(".plp-filter-label-container .btn-clearAll").off("click").on("click",function(){var url=$(this).data("clear_all_url");url=encodeURI(url);AjaxUtils.RemoveFilter.request(url,null);});},clearFilterDialog:function(){$(".modal-dialog .btn-clearAll").off("click").on("click",function(){var filterCode=$(this).data("code");var dialogId="#plp"+filterCode+"Modal";$(dialogId).find("input[type='checkbox']").each(function(index,e){$(this).removeClass("selected");$(this).removeAttr("checked");});});},applyFilterDialog:function(){$(".modal-dialog .btn-apply").off("click").on("click",function(){var filterCode=$(this).data("code");var form=$("#plpForm");var query=$(form).find("input[name='q']");var queryValue=$(query).val();var dialogId="#plp"+filterCode+"Modal";$(dialogId).find("input[type='checkbox']").each(function(index,e){var currentCode=$(this).data("query");if($(this).is(":checked")){if(queryValue.indexOf(currentCode)==-1){queryValue=queryValue+currentCode;}}else{queryValue=queryValue.replace(currentCode,"");}});$(dialogId).hide();$(".modal-backdrop").hide();$(query).val(queryValue);AjaxUtils.Filter.request(this,$(form).serialize());});},priceComfirm:function(){$('.plp-nav-tab-swiper-container').find('.btn-priceRange').off("click").on("click",function(){var valMin=parseInt($('.plp-nav-tab-swiper-container .plp-price-range-container').find('.price-range').find('input[name=valMin]').val().replace("$",""));var valMax=parseInt($('.plp-nav-tab-swiper-container .plp-price-range-container').find('.price-range').find('input[name=valMax]').val().replace("$",""));$("#plpForm").find("input[name='minSel']").val(valMin);$("#plpForm").find("input[name='maxSel']").val(valMax);var form=$("#plpForm");var query=$(form).find("input[name='q']");var queryValue=$(query).val();queryValue=queryValue.replace(/:priceValue:[^:]+/g,"");queryValue=queryValue+":priceValue:["+valMin+" "+"TO"+" "+valMax+"]";$(query).val(queryValue);AjaxUtils.Filter.request(this,$(form).serialize());});},allDialogClick:function(){$('a[data-toggle="modal"]').off("click").on("click",function(){var dialogId=$(this).data("target");var form=$("#plpForm");var query=$(form).find("input[name='q']");var queryValue=$(query).val();$(dialogId).find("input[type='checkbox']").each(function(index,e){var inputQueryValue=$(this).data("query");if(queryValue.indexOf(inputQueryValue)!=-1){$(this).addClass("selected");$(this).prop('checked',true);}else{$(this).removeClass("selected");$(this).removeAttr("checked");}});var parent=$(dialogId).parent();$(dialogId).appendTo($("body"));$(dialogId).modal('show');$(dialogId).on("hidden.bs.modal",function(){$(parent).append($(dialogId));});});$(".mobile-subTab-menu-container .btn-subTab").off("click").on("click",function(){var target=$(this).attr('data-target');$(window).scrollTop(0);var $container=$('.mobile-subTab-menu-container');$container.appendTo($("body"));$container.show();$container.find('.fliter-label input.selected[type="checkbox"]').prop('checked',true);$container.find('.subTab').removeClass('subTabOpen').hide();$(target).closest('.subTab').addClass('subTabOpen').show();$('body').addClass('openSubTab');searchContainer.alphaListScroll();});},priceFilterConvert:function(){var priceFilter=$("#priceFilter").text();var priceFilter_1=priceFilter.replace("[","$");var currentLanguageIsocode=$("#currentLanguageIsocode").val();var priceFilter_2='';if(currentLanguageIsocode=='en'){priceFilter_2=priceFilter_1.replace("to ","- $");}else{priceFilter_2=priceFilter_1.replace("至 ","- $");}
var priceFilter_3=priceFilter_2.replace("]","");$("#priceFilter").text(priceFilter_3);},plpRevampFilterForMobile:function(){$('.mobile-subTab-menu-container .fliter-label').find('input[type="checkbox"]').off("click").on("click",function(){var form=$("#plpForm");var query=$(form).find("input[name='q']");var queryValue=$(query).val();if(mobileCleanAll){var resetQuery=$(".plp-nav-tab-swiper-container").find(".detail").data("initialquery");var facetQuery=resetQuery.substr(resetQuery.indexOf("?")>-1?resetQuery.indexOf("?"):0,resetQuery.length);var q=LanguageSwitch.getUrlParam(facetQuery,"q");if(q!=null){queryValue=q;}}
var isChecked=$(this).is(':checked');var currentDataValue=$(this).data("value");if($(this).prop('id')=='byPNSPLUS'){var currentQueryCode=":pnsMarketPlace:WATSONSMALL";}else{var currentQueryCode=$(this).data("query");}
if(isChecked){$('.mobile-subTab-menu-container').find('.fliter-label').find('input[type="checkbox"][data-query="'+currentQueryCode+'"]').addClass("selected").prop('checked',true);queryValue=queryValue+currentQueryCode;}else{$('.mobile-subTab-menu-container').find('.fliter-label').find('input[type="checkbox"][data-query="'+currentQueryCode+'"]').removeClass("selected").removeAttr("checked");queryValue=queryValue.replace(currentQueryCode,"");}
$(query).val(queryValue);mobileCleanAll=false;PLPUtils.Events.tabNumberForMobile(true);});},applyFilterForMobile:function(){$(".mobile-subTab-menu-container #filterSubTab").find(".btn-apply").off("click").on("click",function(){var queryValue="";var $container=$(".mobile-subTab-menu-container");var min=$container.find(".plp-price-range-container .price-range").find("input[name=valMin]");var max=$container.find(".plp-price-range-container .price-range").find("input[name=valMax]");if(mobileCleanAll){if(min.length>0&&max.length>0){var valMin=parseInt($(min).val().replace("$",""));var valMax=parseInt($(max).val().replace("$",""));var minSlider=parseInt($(".mobile-subTab-menu-container .range-slider").data("range-min"));var maxSlider=parseInt($(".mobile-subTab-menu-container .range-slider").data("range-max"));if(valMin!=minSlider||valMax!=maxSlider){var form=$("#plpForm");var query=$(form).find("input[name='q']");var resetQuery=$(".plp-nav-tab-swiper-container").find(".detail").data("initialquery");var facetQuery=resetQuery.substr(resetQuery.indexOf("?")>-1?resetQuery.indexOf("?"):0,resetQuery.length);var q=LanguageSwitch.getUrlParam(facetQuery,"q");if(q!=null){queryValue=q;}
if(valMin!=minSlider||valMax!=maxSlider){queryValue=queryValue.replace(/:priceValue:[^:]+/g,"");queryValue=queryValue+":priceValue:["+valMin+" "+"TO"+" "+valMax+"]";}
$("#plpForm").find("input[name='minSel']").val(valMin);$("#plpForm").find("input[name='maxSel']").val(valMax);$(query).val(queryValue);AjaxUtils.Filter.request(this,$(form).serialize());}else{var url=$(".plp-filter-label-container .btn-clearAll").data("clear_all_url");if(url==undefined){url=$("#globalParameters").data("facetquery");}
url=encodeURI(url);mobileCleanAll=false;AjaxUtils.RemoveFilter.request(url,null);}}else{var url=$(".plp-filter-label-container .btn-clearAll").data("clear_all_url");if(url==undefined){url=$("#globalParameters").data("facetquery");}
url=encodeURI(url);mobileCleanAll=false;AjaxUtils.RemoveFilter.request(url,null);}}else{var form=$("#plpForm");var query=$(form).find("input[name='q']");var queryValue=$(query).val();$(".mobile-subTab-menu-container #filterSubTab").find("input[type='checkbox']").each(function(index,e){var currentCode=$(this).data("query");if($(this).is(":checked")){if(queryValue.indexOf(currentCode)==-1){queryValue=queryValue+currentCode;}}else{queryValue=queryValue.replace(currentCode,"");}});$(".mobile-subTab-menu-container .subTab.secondSubTab").find("input[type='checkbox']").each(function(index,e){var currentCode=$(this).data("query");if($(this).is(":checked")){if(queryValue.indexOf(currentCode)==-1){queryValue=queryValue+currentCode;}}else{queryValue=queryValue.replace(currentCode,"");}});var pnsPlusQueryCode=":pnsMarketPlace:WATSONSMALL";if($("#byPNSPLUS").is(":checked")){if(queryValue.indexOf(pnsPlusQueryCode)==-1){queryValue=queryValue+pnsPlusQueryCode;}}else{queryValue=queryValue.replace(pnsPlusQueryCode,"");}
if(min.length>0&&max.length>0){var valMin=parseInt($(min).val().replace("$",""));var valMax=parseInt($(max).val().replace("$",""));var minSlider=parseInt($(".mobile-subTab-menu-container .range-slider").data("range-min"));var maxSlider=parseInt($(".mobile-subTab-menu-container .range-slider").data("range-max"));if(valMin!=minSlider||valMax!=maxSlider){queryValue=queryValue.replace(/:priceValue:[^:]+/g,"");queryValue=queryValue+":priceValue:["+valMin+" "+"TO"+" "+valMax+"]";}
$("#plpForm").find("input[name='minSel']").val(valMin);$("#plpForm").find("input[name='maxSel']").val(valMax);}
$(query).val(queryValue);AjaxUtils.Filter.request(this,$(form).serialize());}
$container.find('.subTab').removeClass('subTabOpen');$('body').removeClass('openSubTab');$container.hide();if($('.promo-floating-banner').hasClass("hidden")){$('.promo-floating-banner').removeClass('hidden');}});},clearAllFilterForMobile:function(){$(".mobile-subTab-menu-container .btn-clearAll").off("click").on("click",function(){$(".mobile-subTab-menu-container #filterSubTab").find("input[type='checkbox']").removeClass("selected").removeAttr("checked");$(".mobile-subTab-menu-container .subTab.secondSubTab").find("input[type='checkbox']").removeClass("selected").removeAttr("checked");$(".mobile-subTab-menu-container #filterSubTab .subTab-body .subTab-box .badge-label").hide();var minSlider=parseInt($(".mobile-subTab-menu-container .range-slider").data("range-min"));var maxSlider=parseInt($(".mobile-subTab-menu-container .range-slider").data("range-max"));$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('.range-slider').slider("values",[minSlider,maxSlider]);$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('.range-slider').removeClass('range-sliding');$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('input[name=valMin]').val("$"+minSlider);$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('input[name=valMax]').val("$"+maxSlider);mobileCleanAll=true;}).off("touchstart").on("touchstart",function(){$(this).addClass("active");}).off("touchend").on("touchend",function(){$(this).removeClass("active");});},tabNumber:function(){var query=$("#plpForm").find("input[name='q']").val();if(query!="undefined"&&query!=null&&query!=""){var categoryCount=query.split("category").length;var masterBrandNameCount=query.split("masterBrandName").length;var promotionsTagCount=query.split("promotionsTag").length;var pnsCountryOfOriginCount=query.split("pnsCountryOfOrigin").length;var pnsPickAndDeliveryCount=query.split("pnsPickAndDelivery").length;var pnsProductReviewAverageRatingCount=query.split("pnsProductReviewAverageRating").length;var pnsProductTypeCount=query.split("pnsProductType").length;var pnsPriceCount=query.split("priceValue").length;var colorGroupCount=query.split("colorGroup").length;$(".plp-nav-tab-swiper-container .swiper-slide a").each(function(index,e){if("#tabCategory"==$(this).attr("href")){if(categoryCount>1){$(this).find(".badge-label").show();}}
if("#tabBrand"==$(this).attr("href")){if(masterBrandNameCount>1){$(this).find(".badge-label").show();}}
if("#tabPriceOffer"==$(this).attr("href")){if(promotionsTagCount>1||pnsPriceCount>1){$(this).find(".badge-label").show();}}
if("#tabOrigin"==$(this).attr("href")){if(pnsCountryOfOriginCount>1){$(this).find(".badge-label").show();}}
if("#tabPickupDelivery"==$(this).attr("href")){if(pnsPickAndDeliveryCount>1){$(this).find(".badge-label").show();}}
if("#tabReview"==$(this).attr("href")){if(pnsProductReviewAverageRatingCount>1){$(this).find(".badge-label").show();}}
if("#tabAdvancedOption"==$(this).attr("href")){if(pnsProductTypeCount>1||colorGroupCount>1){$(this).find(".badge-label").show();}}});}},tabNumberForMobile:function(mobileFilterFlag){var query;if(mobileFilterFlag){query=$("#plpForm").find("input[name='q']").val()}else{query=$("#globalParameters").data("facetquery");}
if(query==""){$(".mobile-subTab-menu-container .subTab-body .subTab-box").each(function(index,e){$(this).find(".badge-label").hide();});}else if(query!="undefined"&&query!=null){var categoryCount=query.split("category").length;var masterBrandNameCount=query.split("masterBrandName").length;var promotionsTagCount=query.split("promotionsTag").length;var pnsCountryOfOriginCount=query.split("pnsCountryOfOrigin").length;var pnsPickAndDeliveryCount=query.split("pnsPickAndDelivery").length;var pnsProductReviewAverageRatingCount=query.split("pnsProductReviewAverageRating").length;var pnsProductTypeCount=query.split("pnsProductType").length;var pnsPriceCount=query.split("priceValue").length;var colorGroupCount=query.split("colorGroup").length;$(".mobile-subTab-menu-container .subTab-body .subTab-box").each(function(index,e){if("tabCategory-box"==$(this).attr("id")){if(categoryCount>1){$(this).find(".badge-label").show();}else{$(this).find(".badge-label").hide();}}
if("tabBrand-box"==$(this).attr("id")){if(masterBrandNameCount>1){$(this).find(".badge-label").show();}else{$(this).find(".badge-label").hide();}}
if("tabPriceOffer-box"==$(this).attr("id")){if(promotionsTagCount>1||pnsPriceCount>1){$(this).find(".badge-label").show();}else{$(this).find(".badge-label").hide();}}
if("tabOrigin-box"==$(this).attr("id")){if(pnsCountryOfOriginCount>1){$(this).find(".badge-label").show();}else{$(this).find(".badge-label").hide();}}
if("tabPickupDelivery-box"==$(this).attr("id")){if(pnsPickAndDeliveryCount>1){$(this).find(".badge-label").show();}else{$(this).find(".badge-label").hide();}}
if("tabReview-box"==$(this).attr("id")){if(pnsProductReviewAverageRatingCount>1){$(this).find(".badge-label").show();}else{$(this).find(".badge-label").hide();}}
if("tabAdvancedOption-box"==$(this).attr("id")){if(pnsProductTypeCount>1||colorGroupCount>1){$(this).find(".badge-label").show();}else{$(this).find(".badge-label").hide();}}});}},goFilterForMobile:function(){$('.mobile-filter-sort-menu-container .btn-subTab').off("click").on("click",function(){var target=$(this).attr('data-target');if(target=='#filterSubTab'){previousScrollY=window.scrollY;};var $container=$(".mobile-subTab-menu-container");if($('.promo-floating-banner').is(":visible")){$('.promo-floating-banner').addClass('hidden');}
$(window).scrollTop(0);$container.appendTo($("body"));$container.show();$container.find('.fliter-label input.selected[type="checkbox"]').prop('checked',true);$container.find('.subTab').removeClass('subTabOpen').hide();$(target).closest('.subTab').addClass('subTabOpen').show();$('body').addClass('openSubTab');searchContainer.alphaListScroll();$("input[type='checkbox'][data-selected='true']").addClass("selected").prop('checked',true);$("input[type='checkbox'][data-selected='false']").removeClass("selected");$("input[type='checkbox'][data-selected='false']").removeAttr("checked");var queryValue=$("#globalParameters").data("facetquery");if(queryValue!=undefined&&queryValue!=''&&queryValue.indexOf("priceValue")!=-1&&mobileCleanAll){var minSlider=parseInt($("#valMinForMobile").val());var maxSlider=parseInt($("#valMaxForMobile").val());$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('.range-slider').slider("values",[minSlider,maxSlider]);$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('.range-slider').addClass('range-sliding');$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('input[name=valMin]').val("$"+minSlider);$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('input[name=valMax]').val("$"+maxSlider);}
else if(queryValue.indexOf("priceValue")==-1){var minSlider=parseInt($(".mobile-subTab-menu-container .range-slider").data("range-min"));var maxSlider=parseInt($(".mobile-subTab-menu-container .range-slider").data("range-max"));$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('.range-slider').slider("values",[minSlider,maxSlider]);$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('.range-slider').removeClass('range-sliding');$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('input[name=valMin]').val("$"+minSlider);$('.mobile-subTab-menu-container .plp-price-range-container').find('.price-range').find('input[name=valMax]').val("$"+maxSlider);}
var u=navigator.userAgent;if(u.indexOf('iPhone')>-1){$("#masterBrandScroll").css("height","65px");$("#categoryScroll").css("height","100px");}else{$("#masterBrandScroll").css("height","50px");$("#categoryScroll").css("height","50px");}
PLPUtils.Events.tabNumberForMobile(false);});},showFilterCountForMobile:function(){var filter=$(".plp-filter-label-container");var length=0;if(filter.length>=1){length=$(".plp-filter-label-container .label-list ul li").length-1;}
$(".btn-subTab .filterTotal").text(length);},closeBtnClick:function(){$(".mobile-subTab-menu-container .subTab-header .icon-close").off("click").on("click",function(){var $container=$('.mobile-subTab-menu-container');if($('.promo-floating-banner').hasClass('hidden')){$('.promo-floating-banner').removeClass('hidden');}
$container.find('.subTab').removeClass('subTabOpen');$('body').removeClass('openSubTab');$container.hide();$(window).scrollTop(previousScrollY);mobileCategoryMenuContainer.position();mobileTop.render();PLPUtils.Events.showFilterCountForMobile();var lastQueryValue=$("#globalParameters").data("facetquery");var form=$("#plpForm");var query=$(form).find("input[name='q']");var queryValue=$(query).val();$(".mobile-subTab-menu-container #filterSubTab").find("input[type='checkbox']").each(function(index,e){var inputQueryValue=$(this).data("query");if(lastQueryValue.indexOf(inputQueryValue)==-1){queryValue=queryValue.replace(inputQueryValue,"");}});$(".mobile-subTab-menu-container .subTab.secondSubTab").find("input[type='checkbox']").each(function(index,e){var inputQueryValue=$(this).data("query");if(lastQueryValue.indexOf(inputQueryValue)==-1){queryValue=queryValue.replace(inputQueryValue,"");}});$(query).val(queryValue);});},showPlus:function(){$(".plp-sort-container .show-list").find("input[type='checkbox']").off("click").on("click",function(){var val=$(this).data("value");if($(this).is(":checked")){var queryString=$(this).data("query");var form=$("#plpForm");var q_obj=$(form).find("input[name='q']");var currentSort=$(this).closest(".plp-sort-container").find("li.selected");var q_val=$(q_obj).val();if(q_val!=null&&q_val.indexOf(":")>-1){q_val+=queryString;}
$(q_obj).val(q_val);AjaxUtils.Filter.request(this,$(form).serialize());}else{$("li[data-value='"+val+"']").find(".icon-close").trigger("click");}});},setGlobalFacetQuery:function(val){val=(val==null||val==undefined)?"":val;$("#globalParameters").data("facetquery",val);},initCategoryContainer:function(){var categoryIndex=0;if(Fn.isMobileView()){categoryIndex=$(".mobile-category-menu-container .swiper-wrapper li.active").index()<0?0:$(".mobile-category-menu-container .swiper-wrapper li.active").index();}
mobileCategorySwiper=new Swiper($('.mobile-category-menu-container').find('.swiper-container'),{slidesPerView:'auto',spaceBetween:0,loop:false,initialSlide:categoryIndex});},descriptionClamp:function(){var detailContainer=$(".plp-promo-detail-container");var detail=$(detailContainer).find(".detail");var detailP=$(detail).find("p");var key="clampText";if($(detailP).text()!=$(detail).data("defaulttext")){$(detailP).text($(detail).data("defaulttext"));}
var showMore=$(detailContainer).find(".showMore");if($(showMore).removeClass("hidden").is(":visible")&&!$(detail).hasClass("isClick")){$(detailP).each(function(index,element){$clamp(element,{clamp:2.5,useNativeClamp:false});});$(detailP).data(key,$(detailP).text());}
var detailText=$(detailP).text();var termsConditions=$(detailContainer).find(".termsConditions").text();var isHide=((termsConditions!=null&&$.trim(termsConditions)!="")||($(detailP).length>0&&detailText.indexOf("…")>-1))?false:true;$(showMore)[isHide?'addClass':'removeClass']("hidden");$(showMore).off("click").on("click",function(){$(detail).toggleClass("isClick");if($(detail).hasClass("isClick")){$(detailP).text($(detail).data("defaulttext"));}else{if($(detailP).data(key)!=$(detailP).text()){$(detailP).each(function(index,element){$clamp(element,{clamp:2.5,useNativeClamp:false});});}}});},isExistComponent:function(){if($(".plp-box-swiper-container.full-width").length<=0&&$(".plp-tips-container.full-width").length<=0){$(".plp-filter-list-container").addClass("remove-padding-plp-filter");}
$(".plp-nav-tab-swiper-container .delivery-tips").find(".icon-question").off("click").on("click",function(){var tips=$(this).data("tips");var tipsOf=$(this);ProductTips.Events.hideAll();var toolTipsId=$(this).data("tips-id");setTimeout(function(){$("."+tips).data({"tips-of":tipsOf,"tool-tips":toolTipsId,"tips-position":"top"}).showTooltip(function(){try{var after=document.querySelector(".ui-tooltip").querySelector(".tool-tips-content");var height=window.getComputedStyle(after,":after").getPropertyValue("left");if(height!=null&&height.indexOf("px")>-1){height=Math.floor(height.replace("px",""));}else{height=9;}
$(".ui-tooltip:visible").css({top:$(tipsOf).offset().top-$(".ui-tooltip:visible").outerHeight()-10,left:Math.round($(tipsOf).offset().left)-$(tipsOf).width()-height});$(".ui-tooltip:visible .icon-close").hide();}catch(e){console.info(e);}});});});},}};var ProductTips={click_index:0,NotifyTips:"notifyMe-tips",MaximumTips:"maximum-tips",init:function(){this.Modules.NotifyMe();this.Modules.Maximum();},Modules:{NotifyMe:function(){$(".notify-me").off("click").on("click",function(){var _this=this;var tip=ProductTips.NotifyTips;ProductTips.click_index=ProductTips.click_index+1;if(ProductTips.click_index>1){ProductTips.click_index=0;return;}
var isGuest=$("#isGuest").length==1;if($("#isGuest").length==1){window.location=$("#isGuest").data("url");return;}
if($(this).closest(".button.cartButton").hasClass("isNotifyedProductFlag")){ProductTips.Events.showAt($(this).closest(".button.cartButton"),ProductTips.NotifyTips);return;}
var url="/stockNotification?varCode="+$(this).data("product-code");AjaxUtils.NotifyMe.request(_this,url,null);});},Maximum:function(){$(".product-container").find(".btn-plus, .btn-minus").off("click").on("click",function(){ProductTips.Events.hideAll(ProductTips.MaximumTips);var _this=this;var isAddQty=$(this).hasClass("btn-plus");var tipsOf=$(_this).parents(".button.cartButton");var qtyBox=$(_this).parent().find("div.text");var addToCartForm=$(_this).closest('form');var addToCart=$(addToCartForm).find(".add-to-cart");var cartJson=JSONUtils.getJson(addToCart);var currQuantity=PLPUtils.Events.updateNumber(_this);JSONUtils.setJson(addToCart,{"qty":currQuantity});});}},Events:{showAt:function(tipsOf,tips){ProductTips.Events.hideAll();var toolTipsId=ProductTips.Events.getToolTipsId(tipsOf,tips);var tipsPosition=$(tipsOf).closest(".desktop-view-menu").length>0?"bottom":"top";setTimeout(function(){$("."+tips).data({"tips-of":tipsOf,"tool-tips":toolTipsId,"tips-position":tipsPosition}).showTooltip(function(){$(".ui-tooltip:visible").find(".tool-tips-content")[$(".product-detail:visible").length>0?"removeClass":"addClass"]("tips-width-150").attr("data-scroll",true);var otherTops=(tipsPosition=="top"?-$(".ui-tooltip:visible").outerHeight()-10:$(tipsOf).height()+10);$(".ui-tooltip:visible").css({top:$(tipsOf).offset().top+otherTops,left:$(tipsOf).offset().left+$(tipsOf).width()/2-$(".ui-tooltip:visible").outerWidth()/2});$(".ui-tooltip:visible .icon-close").hide();});});},hideAll:function(tips){$("."+tips).hideTooltip();},getToolTipsId:function(tipsOf,tips){if(tips==ProductTips.MaximumTips){return Fn.isMobileView()&&!Fn.isNonResponsive()?"#maximumTipsMob":"#maximumTips";}else{var toolTipsId="#notifyMeTips";if($(tipsOf).hasClass("isNotifyedProductFlag")){toolTipsId="#notifyMeTipsForAdded";}
return toolTipsId;}}}};var PaginationProductList={init:function(){this.initItemLink();lazyImage.init();},initItemLink:function(){var _this=this;var item=$(".product-list").find(".product-container .item");$(item).find(".productPrimaryPic,.name,.moreOptions").find("a").off("click").on("click",function(e){e.preventDefault();var itemLink=$(this).data("link");$(".product-detail").remove();History.init();function success(data){if($(data).find(".product-detail").length>0){var productDetailContainer=$(data).find(".product-detail");var divs=$("<div>").append($(data));_this.updateDetails(divs,productDetailContainer);$(productDetailContainer).appendTo($("#warp").find("main"));_this.updatePdpMetas(productDetailContainer);var productList=$("#product-list");if($(productList).find(".mobile-subTab-menu-container").length<=0){$(".mobile-subTab-menu-container").appendTo($(productList));}
var productListDiv=$("<div></div>");$(productListDiv).append($(productList).clone());$(productListDiv).append($(".header-tab").clone(true));_this.setLocalStorage(productListDiv);_this.initOldEvents();History.pushState({state:1},document.title,itemLink);$("html, body").animate({scrollTop:0},1);$(productList).find(".showMore").data("currentpageurl",itemLink);$("#product-list,.header-tab,.product-list .tab-container").hide();$(productList).hide();_this.sendPDPGTM(productDetailContainer);divs=null;}else{window.location="/";}};doAjaxAsync(null,itemLink,success,"get","text",true);});_this.browserGoBack();},updatePdpMetas:function(productDetailContainer){var curHeader=$("#product-list").closest("html").find("head");$(curHeader).find("title").html($(productDetailContainer).data("page-title"));$(curHeader).find("meta[name='description']").prop("content",$(productDetailContainer).data("meta-description"));$(curHeader).find("meta[property='og:title']").prop("content",$(productDetailContainer).data("meta-og-title"));$(curHeader).find("meta[property='og:description']").prop("content",$(productDetailContainer).data("meta-og-description"));$(curHeader).find("meta[property='og:site_name']").prop("content",$(productDetailContainer).data("meta-og-site_name"));$(curHeader).find("meta[property='og:type']").prop("content",$(productDetailContainer).data("meta-og-type"));$(curHeader).find("meta[property='og:image']").prop("content",$(productDetailContainer).data("meta-og-image"));$(curHeader).find("meta[property='og:url']").prop("content",$(productDetailContainer).data("meta-og-url"));$(curHeader).find("link[rel='canonical']").prop("href",$(productDetailContainer).data("canonical-link"));},updateDetails:function(divs,productDetailContainer){var canonical=$(divs).find("link[rel='canonical']");$("#dynamicYield").html(divs.find("#dynamicYield").html());if(canonical!=null){$(productDetailContainer).data("canonical-link",$(canonical).prop("href"));divs=null;}},initOldEvents:function(){Input.init();Button.init();TabPage.init();Item.init();ProductDetail.init();RenderLayout();},setLocalStorage:function(productListDiv){localStorage.setItem('product-list-of-plp',$(productListDiv).html());localStorage.setItem('product-list-of-plp-header',$("header").html());localStorage.setItem('product-list-of-plp-header-hotKey',$(".pns-mobile-search.mobile-search").html());localStorage.setItem('product-list-of-plp-flag',$("header .main.watsonsmall").length>0?"pnsPlus":"pns");localStorage.setItem('product-list-facetquery',$("#globalParameters").data("facetquery"));localStorage.setItem('product-list-of-scroll-top',$(window).scrollTop());localStorage.setItem('page-head-resource',$("head").html());},sendPDPGTM:function(productDetailContainer){try{gtmPDPImpression();gtmPDPYouMayAlsoLike();gtmPLPClick(productDetailContainer);}catch(e){console.info(e);}},initPdpStateChange:function(){var _this=this;if($(".product-detail").length==0){return;}
History.Adapter.bind(window,'statechange',function(){_this.floatBottomClone();var stateObj=History.getState();var path=stateObj.url;if(path!=null){if($("#product-list").length==0){_this.setFacetValue();var productList=localStorage.getItem('product-list-of-plp');$(productList).appendTo($("#warp").find("main"));$("#product-list").show();$(".product-detail").hide();$("#wishlist-added").remove();_this.refreshHeader();if($(".promotion.general.product-list").length>0){if(!Fn.isDesktopView()){var header_tab=$("main.home .header-tab");$(header_tab).remove();$("#product-list").before(header_tab);$(".promotion.general.product-list").before($("#warp").find("main").find(".mobile-filter-sort-menu-container").clone(true).show());if($("main.home").hasClass('notMarquee')){$(".mobile-filter-sort-menu-container").css("top",$("header .main").height());}}}
_this.handleHappyTime("3");PaginationProductList.initProductListAfterGoBack();}else{$("#product-list").find(".showMore").data("currentpageurl",path);$("#product-list").hide();$(".product-detail").show();}
_this.handleHappyTime("2",$("#product-list").length==0);}});},browserGoBack:function(){var _this=this;$(window).unbind('statechange');History.Adapter.bind(window,'statechange',function(){var stateObj=History.getState();var stateNumber=stateObj.data.state;if(stateNumber!=1){$("#product-list").find(".showMore").data("currentpageurl",stateObj.url);var productList=localStorage.getItem('product-list-of-plp');$("#product-list").html($(productList).html());$("#wishlist-added").remove();_this.handleHappyTime("1");}else{$("#product-list").find(".showMore").data("currentpageurl",stateObj.url);$(".promotion.general.product-list").parent().find(".mobile-filter-sort-menu-container").hide();}
$("#product-list")[stateNumber!=1?'show':'hide']();$(".product-detail")[stateNumber!=1?'hide':'show']();_this.handleHappyTime("2",(stateNumber!=1));if(stateNumber!=1&&$("#product-list:visible").length>0){_this.initProductListAfterGoBack();_this.handleHappyTime("3");}
_this.floatBottomClone();if($("body .float-bottom").length==0&&$("#product-list:visible").length==0&&floatBottom!=null){$("body .product-detail").append(floatBottom);}});},handleHappyTime:function(type,flag){if($(".promotion.general.product-list").length>0){if(type=="1"){$(".promotion.general.product-list").find(".mobile-filter-sort-menu-container").hide();if(!Fn.isDesktopView()){$(".mobile-filter-sort-menu-container").show();if($("main.home").hasClass('notMarquee')){$(".mobile-filter-sort-menu-container").css("top",$("header .main").height());}}}else if(type=="2"){$(".header-tab,.product-list .tab-container")[flag?'show':'hide']();}else if(type=="3"){$(window).on("scroll resize",function(){$(".product-list").css("margin-top","0px");});}}},setFacetValue:function(){var facetquery=localStorage.getItem('product-list-facetquery');PLPUtils.Events.setGlobalFacetQuery(facetquery);},refreshHeader:function(){var isWmPage=$("header .main.watsonsmall").length>0?true:false;var isAlReadyWm=localStorage.getItem('product-list-of-plp-flag')=="pnsPlus"?true:false;if(isWmPage&&!isAlReadyWm){var header=localStorage.getItem('product-list-of-plp-header');var hotKey=localStorage.getItem("product-list-of-plp-header-hotKey");$("header").addClass("hidden").remove();$("body").prepend($("<header>").addClass("hidden").append(header));$(".pns-mobile-search.mobile-search").html(hotKey);var appendDom=function(nextDom,resource){if($(resource).length>0){var temp_resource=resource;$(resource).remove();$(nextDom).before($(temp_resource));}};var globalJs=$("script[src*='/wmGlobal.min.js']");if(globalJs.length>0){var globalCss=$("link[href*='/wmGlobal.min.css']");var resources=$("<div>").html(localStorage.getItem("page-head-resource"));var cssFile=$(resources).find("link[href*='/global.min.css']").attr("href");$(globalCss).next().before("<link type='text/css' rel='stylesheet' media='screen,print' href='"+cssFile+"'>");this.temp_ajaxUtils=AjaxUtils;appendDom($(globalJs).next(),globalJs);AjaxUtils=this.temp_ajaxUtils;setTimeout(function(){$(globalCss).remove();},3000);}else{var headerCss=$("link[href*='/header-revamp-custom.css']");var homeRevamp=$("script[src*='/home-revamp-custom.js']");var homeRevampCustom=$("script[src*='/home-header-revamp-custom.js']");appendDom($(headerCss).next(),headerCss);appendDom($(homeRevamp).next(),homeRevamp);appendDom($(homeRevampCustom).next(),homeRevampCustom);if($(headerCss).length==0){$("head").append("<link rel='stylesheet' type='text/css' media='screen,print' href='/_ui/responsive/global/css/header-revamp-custom.css'>");}
PaginationProductList.initHeaderEvent();}
$("header").removeClass("hidden");}},initProductListAfterGoBack:function(){$(".float-bottom").remove();this.init();mobileSubTabMenuContainer.init();PLPUtils.Modules.PLP.render();PLPUtils.Modules.PLP.renderLayout();this.gotoPrePLPScrollTop();},floatBottomClone:function(){if($("body").find(".float-bottom").length>0){floatBottom=$("body").find(".float-bottom").clone(true);}},gotoPrePLPScrollTop:function(){var scrollTop=localStorage.getItem('product-list-of-scroll-top');if(scrollTop!=null&&scrollTop!=''){setTimeout(function(){$("html, body").stop().animate({scrollTop:scrollTop},1);},100);}},initHeaderEvent:function(){Header.initSearchBar();HeaderMyCart.init();SearchBox.init();_Header.init();LanguageSwitch.init();}}
var priceRangeRevampContainer={init:function()
{this.container=$('.plp-price-range-container');this.priceRange=this.container.find('.price-range');this.rangeSlider=this.priceRange.find('.range-slider');this.min=this.priceRange.find('input[name=valMin]');this.max=this.priceRange.find('input[name=valMax]');this.rangeMaxNum=this.rangeSlider.attr('data-range-max');this.minNum=this.min.val();this.maxNum=this.max.val();this.render();},render:function()
{var $container=this.container;if($container.length){$container.each(function(){var $priceRange=$(this).find('.price-range'),$rangeSlider=$priceRange.find('.range-slider'),$min=$priceRange.find('input[name=valMin]'),$max=$priceRange.find('input[name=valMax]'),rangeMaxNum=parseInt($rangeSlider.attr('data-range-max')),rangeMinNum=parseInt($rangeSlider.attr('data-range-min')),minNum=$min.val(),maxNum=$max.val();var rangeSliders=$rangeSlider.find(".ui-slider-range");if(rangeSliders.length>0){$($rangeSlider).children().remove();}
$min.val('$'+minNum);$max.val('$'+maxNum);$rangeSlider.slider({range:true,min:rangeMinNum,max:rangeMaxNum,values:[minNum,maxNum],step:1,slide:function(event,ui){$(this).addClass('range-sliding');if(ui.values[0]==ui.values[1]){if(ui.values[0]!=0){$priceRange.find('input[name=valMin]').val('$'+parseInt(ui.values[0]-1));$priceRange.find('input[name=valMax]').val('$'+ui.values[1]);};}else{$priceRange.find('input[name=valMin]').val('$'+ui.values[0]);$priceRange.find('input[name=valMax]').val('$'+ui.values[1]);};}});$min.keyup(function(){var minNum=parseInt($(this).val().replace('$','')!=''?$(this).val().replace('$',''):0),maxNum=parseInt($(this).closest('.range-input').find('input[name=valMax]').val().replace('$',''));if(minNum<maxNum)
$rangeSlider.slider("values",[minNum,maxNum]);});$max.keyup(function(){var minNum=parseInt($(this).closest('.range-input').find('input[name=valMin]').val().replace('$','')),maxNum=parseInt($(this).val().replace('$','')!=''?$(this).val().replace('$',''):'');if(maxNum>minNum)
$rangeSlider.slider("values",[minNum,maxNum]);});$('.btn-clearAll').click(function(){$rangeSlider.slider("values",[0,rangeMaxNum]);$rangeSlider.removeClass('range-sliding');$priceRange.find('input[name=valMin]').val('$'+0);$priceRange.find('input[name=valMax]').val('$'+rangeMaxNum);});});};}};var navTabRevampContainer={init:function()
{this.container=$('.plp-nav-tab-swiper-container');this.filterContainer=this.container.find('.plp-filter-label-container');this.navTab=this.container.find('.nav-tab');this.nav=this.navTab.find('.nav');this.tabContent=this.container.find('.tab-content');this.render();},hash:function()
{var $nav=this.nav,$tabContent=this.tabContent;if(!window.location.hash){$nav.find('li:first-child a').addClass('active');$tabContent.find('.tab-pane:first-child').addClass('active');};},swiper:function()
{var $container=this.container;navTabSwiper=new Swiper($container.find('.swiper-container'),{slidesPerView:'auto',spaceBetween:0,loop:false,});},label:function()
{var $filterContainer=this.filterContainer;if($filterContainer.find("li[data-value]").length>0){$filterContainer.show();}},render:function(){var $container=this.container;if($container.length){this.hash();this.swiper();this.label();}}};$(document).ready(function()
{PLPUtils.init();});$(window).on("resize",function(){CommonUtils.debounce(PLPUtils.Events.descriptionClamp(),500);});(function(root,factory){if(typeof define=='function'&&define.amd){define(['jquery'],factory);}else{factory(root.jQuery);}})(this,function($){var UA=navigator.userAgent;var isEdge=/Edge/i.test(UA);var SmartBanner=function(options){this.origHtmlMargin=parseFloat($('html').css('margin-top'));this.options=$.extend({},$.smartbanner.defaults,options);var standalone=navigator.standalone;if(this.options.force){this.type=this.options.force;}
else if(UA.match(/Windows Phone/i)!==null&&UA.match(/Edge|Touch/i)!==null){this.type='windows';}
else if(UA.match(/iPhone|iPod/i)!==null||(UA.match(/iPad/)&&this.options.iOSUniversalApp)){if((/Safari/i).test(navigator.appVersion)||!(/CriOS/i).test(navigator.appVersion)||UA.match(/FxiOS/i)!=null||window.Number(UA.substr(UA.indexOf('OS ')+3,3).replace('_','.'))<6){this.type='ios';}}
else if(UA.match(/\bSilk\/(.*\bMobile Safari\b)?/)||UA.match(/\bKF\w/)||UA.match('Kindle Fire')){this.type='kindle';}
else if(UA.match(/Android/i)!==null){this.type='android';}
if(!this.type||standalone||this.getCookie('sb-closed')||this.getCookie('sb-installed')){return;}
this.scale=this.options.scale=='auto'?$(window).width()/window.screen.width:this.options.scale;if(this.scale<1){this.scale=1;}
var meta=$(this.type=='android'?'meta[name="google-play-app"]':(this.type=='ios'?'meta[name="apple-itunes-app-temp"]':(this.type=='kindle'?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]')));if(!meta.length){return;}
if(this.type=='windows'){if(isEdge){this.appId=$('meta[name="msApplication-PackageEdgeName"]').attr('content');}
if(!this.appId){this.appId=$('meta[name="msApplication-PackageFamilyName"]').attr('content');}}
else{var parsedMetaContent=/app-id=([^\s,]+)/.exec(meta.attr('content'));if(parsedMetaContent){this.appId=parsedMetaContent[1];}else{return;}}
this.title=this.options.title?this.options.title:(meta.data('title')||$('title').text().replace(/\s*[|\-·].*$/,''));this.author=this.options.author?this.options.author:(meta.data('author')||($('meta[name="author"]').length?$('meta[name="author"]').attr('content'):window.location.hostname));this.iconUrl=meta.data('icon-url');this.price=meta.data('price');if(typeof this.options.onInstall=='function'){this.options.onInstall=this.options.onInstall;}else{this.options.onInstall=function(){};}
if(typeof this.options.onClose=='function'){this.options.onClose=this.options.onClose;}else{this.options.onClose=function(){};}
this.create();this.show();this.listen();};SmartBanner.prototype={constructor:SmartBanner,create:function(){var iconURL;var price=this.price||this.options.price;var link=this.options.url||(function(){switch(this.type){case'android':return'market://details?id=';case'kindle':return'amzn://apps/android?asin=';case'windows':return isEdge?'ms-windows-store://pdp/?productid=':'ms-windows-store:navigate?appid=';}
return'https://itunes.apple.com/'+this.options.appStoreLanguage+'/app/id';}.call(this)+this.appId);var inStore=!price?'':(function(){var result=price+' - ';switch(this.type){case'android':return result+this.options.inGooglePlay;case'kindle':return result+this.options.inAmazonAppStore;case'windows':return result+this.options.inWindowsStore;}
return result+this.options.inAppStore}.call(this));var gloss=this.options.iconGloss==null?(this.type=='ios'):this.options.iconGloss;if(this.type=='android'&&this.options.GooglePlayParams){link+='&referrer='+this.options.GooglePlayParams;}
var banner=('<div id="smartbanner" class="'+this.type+'">'+'<div class="sb-container">'+'<a href="#" class="sb-close">&times;</a>'+'<span class="sb-icon"></span>'+'<div class="sb-info">'+'<strong>'+this.title+'</strong>'+'<span>'+this.author+'</span>'+'<span>'+inStore+'</span>'+'</div>'+'<a href="'+link+'" class="sb-button">'+'<span>'+this.options.button+'</span>'+'</a>'+'</div>'+'</div>');if(this.options.layer){$(this.options.appendToSelector).append(banner);}else{$(this.options.appendToSelector).prepend(banner);}
if(this.options.icon){iconURL=this.options.icon;}else if(this.iconUrl){iconURL=this.iconUrl;}else if($('link[rel="apple-touch-icon-precomposed"]').length>0){iconURL=$('link[rel="apple-touch-icon-precomposed"]').attr('href');if(this.options.iconGloss==null){gloss=false;}}else if($('link[rel="apple-touch-icon"]').length>0){iconURL=$('link[rel="apple-touch-icon"]').attr('href');}else if($('meta[name="msApplication-TileImage"]').length>0){iconURL=$('meta[name="msApplication-TileImage"]').attr('content');}else if($('meta[name="msapplication-TileImage"]').length>0){iconURL=$('meta[name="msapplication-TileImage"]').attr('content');}
if(iconURL){$('#smartbanner .sb-icon').css('background-image','url('+iconURL+')');if(gloss){$('#smartbanner .sb-icon').addClass('gloss');}}else{$('#smartbanner').addClass('no-icon');}
this.bannerHeight=$('#smartbanner').outerHeight()+2;if(this.scale>1){$('#smartbanner').css('top',parseFloat($('#smartbanner').css('top'))*this.scale).css('height',parseFloat($('#smartbanner').css('height'))*this.scale).hide();$('#smartbanner .sb-container').css('-webkit-transform','scale('+this.scale+')').css('-msie-transform','scale('+this.scale+')').css('-moz-transform','scale('+this.scale+')').css('width',$(window).width()/this.scale);}
$('#smartbanner').css('position',this.options.layer?'absolute':'static');},listen:function(){$('#smartbanner .sb-close').on('click',$.proxy(this.close,this));$('#smartbanner .sb-button').on('click',$.proxy(this.install,this));},show:function(callback){var banner=$('#smartbanner');banner.stop();if(this.options.layer){banner.animate({top:0,display:'block'},this.options.speedIn).addClass('shown').show();$(this.pushSelector).animate({paddingTop:this.origHtmlMargin+(this.bannerHeight*this.scale)},this.options.speedIn,'swing',callback);}
else{if($.support.transition){banner.animate({top:0},this.options.speedIn).addClass('shown');var transitionCallback=function(){$('html').removeClass('sb-animation');if(callback){callback();}};$(this.pushSelector).addClass('sb-animation').one($.support.transition.end,transitionCallback).emulateTransitionEnd(this.options.speedIn).css('margin-top',this.origHtmlMargin+(this.bannerHeight*this.scale));}
else{banner.slideDown(this.options.speedIn).addClass('shown');}}},hide:function(callback){var banner=$('#smartbanner');banner.stop();if(this.options.layer){banner.animate({top:-1*this.bannerHeight*this.scale,display:'block'},this.options.speedIn).removeClass('shown');$(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,'swing',callback);}
else{if($.support.transition){if(this.type!=='android'){banner.css('top',-1*this.bannerHeight*this.scale).removeClass('shown');}
else{banner.css({display:'none'}).removeClass('shown');}
var transitionCallback=function(){$('html').removeClass('sb-animation');if(callback){callback();}};$(this.pushSelector).addClass('sb-animation').one($.support.transition.end,transitionCallback).emulateTransitionEnd(this.options.speedOut).css('margin-top',this.origHtmlMargin);}
else{banner.slideUp(this.options.speedOut).removeClass('shown');}}},close:function(e){e.preventDefault();this.hide();this.options.onClose(e);},install:function(e){if(this.options.hideOnInstall){this.hide();}
this.setCookie('sb-installed','true',this.options.daysReminder);this.options.onInstall(e);},setCookie:function(name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);value=encodeURI(value)+((exdays==null)?'':'; expires='+exdate.toUTCString());document.cookie=name+'='+value+'; path=/;';},getCookie:function(name){var i,x,y,ARRcookies=document.cookie.split(';');for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf('='));y=ARRcookies[i].substr(ARRcookies[i].indexOf('=')+1);x=x.replace(/^\s+|\s+$/g,'');if(x==name){return decodeURI(y);}}
return null;},switchType:function(){var that=this;this.hide(function(){that.type=that.type=='android'?'ios':'android';var meta=$(that.type=='android'?'meta[name="google-play-app"]':'meta[name="apple-itunes-app-temp"]').attr('content');that.appId=/app-id=([^\s,]+)/.exec(meta)[1];$('#smartbanner').detach();that.create();that.show();});}};$.smartbanner=function(option){var $window=$(window);var data=$window.data('smartbanner');var options=typeof option=='object'&&option;if(!data){$window.data('smartbanner',(data=new SmartBanner(options)));}
if(typeof option=='string'){data[option]();}};$.smartbanner.defaults={title:null,author:null,price:'FREE',appStoreLanguage:'us',inAppStore:'On the App Store',inGooglePlay:'In Google Play',inAmazonAppStore:'In the Amazon Appstore',inWindowsStore:'In the Windows Store',GooglePlayParams:null,icon:null,iconGloss:null,button:'VIEW',url:null,scale:'auto',speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:true,layer:false,iOSUniversalApp:true,appendToSelector:'body',pushSelector:'html'};$.smartbanner.Constructor=SmartBanner;function transitionEnd(){var el=document.createElement('smartbanner');var transEndEventNames={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]};}}
return false;}
if($.support.transition!==undefined){return;}
$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this;$(this).one($.support.transition.end,function(){called=true;});var callback=function(){if(!called){$($el).trigger($.support.transition.end);}};setTimeout(callback,duration);return this;};$(function(){$.support.transition=transitionEnd();});});var HomePage={init:function(){HomePage.bindEventForNewProductCarouselTab();HomePage.displayNoneWmSmartBanner();setTimeout(function(){$(".product-container .item .border .padding .name p").each(function(index,element){$clamp(element,{clamp:2,useNativeClamp:false});});},1);},bindEventForNewProductCarouselTab:function(){$("#home-main-category-module").on("click","li",function(){var componentUid=$(this).attr("id");$("#pnsNewTabProductList .tab-pane").each(function(){var currentTabId=$(this).attr("id");if(componentUid==currentTabId){$(this).show().addClass("active");}else{$(this).hide().removeClass("active");}});});},displayNoneWmSmartBanner:function(){if($(".watsonsmall").length!=0){$("#smartbanner").hide();$("#smartbanner").css("top","-80px");$("header .float-message").css("top","0");}}}
$(function(){HomePage.init();});